(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f9a4496"],{"5a04":function(e,t,s){"use strict";var r=s("7c5d"),n=s.n(r);n.a},7698:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return o}));var r=s("a27e");function n(e){return Object(r["a"])({url:"/users/me/tramites/",method:"GET",params:e})}function o(e){return Object(r["a"])({url:"/users/me/tramites/",method:"POST",data:e})}},"7c5d":function(e,t,s){},"8dfc":function(e,t,s){e.exports=s.p+"img/toga.0a7a025.8eebe738.svg"},bbbc:function(e,t,s){e.exports=s.p+"img/undraw_Online_calendar_re_wk3t.ba28fc18.svg"},c116:function(e,t,s){e.exports=s.p+"img/undraw_exams_g4ow.d16dc784.svg"},ccde:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.$route.meta.hideModal?e._e():s("section",[s("a",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.users.isLogued,expression:"$store.state.users.isLogued"}],staticClass:"button is-floating is-primary",on:{click:function(t){return e.show_form(!0)}}},[s("b-icon",{attrs:{size:"is-small",icon:"border-all"}})],1),s("div",{staticClass:"modal",class:{"is-active":e.$store.state.users.isComponentModalActive}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[e._m(0),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){return e.close_form()}}})]),s("section",{staticClass:"modal-card-body"},[s("section",{staticClass:"container"},[s("b-steps",{scopedSlots:e._u([{key:"navigation",fn:function(t){t.previous,t.next;return[s("div",{staticClass:"columns mt-1 is-mobile"},[0!==e.$store.state.users.step?s("b-button",{staticClass:"column is-2 mx-2",attrs:{"icon-right":"arrow-left",type:"is-primary",size:"is-medium",expanded:""},on:{click:function(t){return t.preventDefault(),e.previousStep()}}}):e._e(),3===e.$store.state.users.step?s("b-button",{staticClass:"column",attrs:{type:"is-primary",size:"is-medium",loading:e.isLoading,expanded:""},on:{click:e.submit}},[e._v("¡Enviar solicitud!")]):e._e(),0!==e.$store.state.users.step&&3!==e.$store.state.users.step?s("b-button",{staticClass:"column",attrs:{"icon-right":"arrow-right",type:"is-primary",size:"is-medium",expanded:""},on:{click:function(t){return t.preventDefault(),e.nextStep()}}},[e._v("Siguiente")]):e._e()],1)]}}],null,!1,2773171782),model:{value:e.$store.state.users.step,callback:function(t){e.$set(e.$store.state.users,"step",t)},expression:"$store.state.users.step"}},[s("b-step-item",{attrs:{clickable:!1,label:"Trámite",icon:"file-document"}},[s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-vertical is-12"},[s("div",{staticClass:"tile"},[s("div",{staticClass:"tile is-parent is-vertical"},e._l(e.tramites,(function(t){return s("MediaOption",{directives:[{name:"show",rawName:"v-show",value:"TITULACIÓN"!==t.value||e.studentForm.admission>=9,expression:"tramite.value !== 'TITULACIÓN' || studentForm.admission >= 9"}],key:t.value,staticClass:"tile is-child notification is-primary dgw-option",attrs:{item:t},on:{selected:function(t){return e.optionSelected(1,t)}}})})),1)])])])]),s("b-step-item",{attrs:{clickable:!1,label:"Requisitos",icon:"file-document-edit"}},[s("OptionsDescription",{attrs:{option:e.$store.state.users.schoolRequest.type}}),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-12"},[s("div",[s("RequestForm",{ref:"step1",attrs:{option:e.$store.state.users.schoolRequest.type,user:e.user,schoolRequest:e.schoolRequest,request:e.request}})],1)])])],1),s("b-step-item",{attrs:{clickable:!1,label:"Datos",icon:"account"}},[s("StudentDataForm",{ref:"step2",attrs:{user:e.user,student:e.studentForm,careers:e.careers}})],1),s("b-step-item",{attrs:{clickable:!1,label:"Archivos",icon:"cloud-upload"}},[s("b-message",{staticClass:"message",attrs:{title:"Carga de documentos",type:"is-primary","has-icon":"",size:"is-small",icon:"paperclip",closable:!1}},[s("strong",[e._v("¡IMPORTANTE!")]),e._v(" "),s("br"),e._v(" Solo se aceptan documentos en formato (.jpg, .jpeg, .png, .pdf) con un peso máximo de "),s("b",[e._v("4Mb")]),e._v(". "),s("br"),e._v(" Si cuenta con un documento subido anteriormente puede usar ese mismo, no es necesario hacer nada en ese caso. "),s("br")]),s("UploadsModalForm",{ref:"step3",attrs:{option:e.$store.state.users.schoolRequest.type,schoolRequest:e.schoolRequest,student:e.studentForm,uploadsList:e.uploads}})],1)],1)],1)])])])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"modal-card-title title-size"},[s("b",[e._v("Solicitud de documentos")])])}],o=(s("a4d3"),s("e01a"),s("d3b7"),s("5530")),i=(s("96cf"),s("1da1")),a=s("2f62"),u=s("7698"),c=s("2646"),l=s("e15a"),d={mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("students/BASIC",{key:"studentForm",value:e.user.student||{}}),e.$store.commit("users/SET_STEP",0),e.studentOriginal.enrollment=e.studentForm.enrollment,e.studentOriginal.career=e.studentForm.career,e.studentOriginal.admission=e.studentForm.admission;case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{file:null,isLoading:!1,careers:c["a"],request:{otherDescription:"",vacation:!1,extra_info:{}},studentOriginal:{enrollment:"",career:"",admission:""},tramites:l["c"],uploads:{files:[],tags:[]}}},components:{MediaOption:function(){return s.e("chunk-2d0d0ee9").then(s.bind(null,"69a1"))},OptionsDescription:function(){return s.e("chunk-2d2252af").then(s.bind(null,"e2f2"))},RequestForm:function(){return s.e("chunk-2d224c64").then(s.bind(null,"e223"))},StudentDataForm:function(){return s.e("chunk-2d0b2b37").then(s.bind(null,"24dc"))},UploadsModalForm:function(){return s.e("chunk-4549538a").then(s.bind(null,"52ee"))}},computed:Object(o["a"])(Object(o["a"])({},Object(a["b"])("users",["user","schoolRequest"])),Object(a["b"])("students",["studentForm"])),methods:{show_form:function(e){this.$store.commit("users/SHOW_FORM",e)},optionSelected:function(e,t){this.$store.commit("users/SET_STEP",e),this.$store.commit("users/SET_TYPE",t.value)},nextStep:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.$store.state.users.step,t.next=1===t.t0?3:2===t.t0?10:17;break;case 3:return t.next=5,e.$refs.step1.$refs.form1.validate();case 5:if(s=t.sent,s){t.next=8;break}return t.abrupt("return");case 8:return e.$refs.step1.$refs.form1.$nextTick((function(){return e.$store.commit("users/SET_STEP",e.$store.state.users.step+=1)})),t.abrupt("break",18);case 10:return t.next=12,e.$refs.step2.$refs.form2.validate();case 12:if(s=t.sent,s){t.next=15;break}return t.abrupt("return");case 15:return e.$refs.step1.$refs.form1.$nextTick((function(){return e.$store.commit("users/SET_STEP",e.$store.state.users.step+=1)})),t.abrupt("break",18);case 17:return t.abrupt("break",18);case 18:case"end":return t.stop()}}),t)})))()},previousStep:function(){var e=this.$store.state.users.step;e-=1,this.$store.commit("users/SET_STEP",e),0==this.$store.state.users.step&&this.reload()},reload:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.commit("users/CLEAR_REQ");case 2:return t.next=4,e.$store.dispatch("users/getUser");case 4:for(s in e.studentForm.enrollment=e.studentOriginal.enrollment,e.studentForm.career=e.studentOriginal.career,e.studentForm.admission=e.studentOriginal.admission,e.uploads)e.uploads[s].file=null;case 8:case"end":return t.stop()}}),t)})))()},close_form:function(){var e=this;0!=this.$store.state.users.step?this.$buefy.dialog.confirm({title:"¡Hey!",message:"Estás en proceso de realizar una solicitud. ¿Deseas cancelarla?",cancelText:"Continuar",confirmText:"Salir",type:"is-danger",hasIcon:!0,onConfirm:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$buefy.toast.open({message:"Solicitud cancelada",type:"is-danger"}),e.request.otherDescription="",e.request.vacation=!1,e.reload(),e.show_form(!1),e.$store.commit("users/SET_STEP",0);case 6:case"end":return t.stop()}}),t)})));function s(){return t.apply(this,arguments)}return s}()}):this.close_form_direc()},close_form_direc:function(){this.request.otherDescription="",this.request.vacation=!1,this.reload(),this.show_form(!1),this.$store.commit("users/SET_STEP",0)},submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s="",e.schoolRequest.description?("OTRO"===e.schoolRequest.description&&(e.schoolRequest.description=e.request.otherDescription.toUpperCase(),e.request.otherDescription=""),e.request.vacation&&(e.schoolRequest.description+=" CON PERÍODO VACACIONAL",e.request.vacation=!1),e.user.CURP&&(e.user.CURP=e.user.CURP.toUpperCase()),e.studentForm.enrollment=e.studentForm.enrollment.toUpperCase(),s="Revisa que tus datos sean correctos.\n        Has seleccionado el trámite: "+e.$store.state.users.schoolRequest.type+" de tipo: "+e.schoolRequest.description):s="Revisa que tus datos sean correctos.\n        Has seleccionado el trámite: "+e.$store.state.users.schoolRequest.type,e.$buefy.dialog.confirm({title:"¡Por último!",message:s,cancelText:"Cancelar",confirmText:"Enviar",type:"is-info",hasIcon:!0,onConfirm:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var s,r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,s=e.user,t.next=5,e.$store.dispatch("users/update",{user:s});case 5:return r=e.studentForm,n=e.uploads,t.next=9,e.$store.dispatch("students/update",{studentForm:r,files:n});case 9:return t.next=11,Object(u["a"])(Object(o["a"])(Object(o["a"])({},e.schoolRequest),e.request));case 11:for(a in i=t.sent,e.uploads.files)null!=e.uploads.files[a]&&e.$refs.step3.uploadFile(e.uploads.files[a],e.uploads.tags[a]);e.$buefy.toast.open({message:"¡Solicitud enviada correctamente!",type:"is-success"}),"TITULACIÓN"!==e.schoolRequest.type?location.reload():e.$router.push("/titulation/"+i.titulation.id),e.show_form(!1),e.$store.commit("users/SET_STEP",0),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](1),console.log(t.t0),e.$dw.messages.alertErrorDialog({title:"No es posible realizar el trámite",message:"Revisa que no tengas un trámite pendiente de tipo: "+e.schoolRequest.type+" e intenta de nuevo."}).then((function(){e.close_form_direc()}));case 23:return t.prev=23,e.isLoading=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[1,19,23,26]])})));function s(){return t.apply(this,arguments)}return s}()});case 3:case"end":return t.stop()}}),t)})))()}}},m=d,p=(s("5a04"),s("2877")),f=Object(p["a"])(m,r,n,!1,null,null,null);t["default"]=f.exports},d3e5:function(e,t,s){e.exports=s.p+"img/undraw_doctor_kw5l.e60823ba.svg"},e01a:function(e,t,s){"use strict";var r=s("23e7"),n=s("83ab"),o=s("da84"),i=s("5135"),a=s("861d"),u=s("9bf2").f,c=s("e893"),l=o.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new l(e):void 0===e?l():l(e);return""===e&&(d[t]=!0),t};c(m,l);var p=m.prototype=l.prototype;p.constructor=m;var f=p.toString,b="Symbol(test)"==String(l("test")),h=/^Symbol\((.*)\)[^)]+$/;u(p,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=f.call(e);if(i(d,e))return"";var s=b?t.slice(7,-1):t.replace(h,"$1");return""===s?void 0:s}}),r({global:!0,forced:!0},{Symbol:m})}},e15a:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return o}));var r={NORMAL:"NORMAL",SITUR:"SITUR",PROMEDIO:"PROMEDIO",OTRO:"OTRO"},n={ALTA:"ALTA",BAJA:"BAJA"},o={CONSTANCIA:{value:"CONSTANCIA",label:"Constancia de estudios",req:"Requiere fotografía e INE",icon:s("c116")},IMSS:{value:"IMSS",label:"Alta/Baja IMSS",req:"Requiere NSS, CURP e INE",icon:s("d3e5")},SEGUIMIENTO:{value:"SEGUIMIENTO",label:"Seguimiento académico (Kardex)",req:"Requiere INE",icon:s("c116")},HORARIO:{value:"HORARIO",label:"Horario escolar",req:"Requiere INE",icon:s("bbbc")},TITULATION:{value:"TITULACIÓN",label:"Titulación",req:"Solo alumnos de 9º o mayor ingreso",icon:s("8dfc")}}}}]);