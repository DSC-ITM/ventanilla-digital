(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ee707d5"],{"5a04":function(e,t,s){"use strict";var i=s("7c5d"),o=s.n(i);o.a},7698:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return r}));var i=s("a27e");function o(e){return Object(i["a"])({url:"/users/tramites/",method:"GET",params:e})}function r(e){return Object(i["a"])({url:"/users/tramites/",method:"POST",data:e})}},"7c5d":function(e,t,s){},"8dfc":function(e,t,s){e.exports=s.p+"img/toga.0a7a025.8eebe738.svg"},bbbc:function(e,t,s){e.exports=s.p+"img/undraw_Online_calendar_re_wk3t.ba28fc18.svg"},c116:function(e,t,s){e.exports=s.p+"img/undraw_exams_g4ow.d16dc784.svg"},ccde:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.$route.meta.hideModal?e._e():s("section",[s("a",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.users.isLogued,expression:"$store.state.users.isLogued"}],staticClass:"button is-floating is-primary",on:{click:function(t){return e.show_form(!0)}}},[s("b-icon",{attrs:{size:"is-small",icon:"border-all"}})],1),s("div",{staticClass:"modal",class:{"is-active":e.$store.state.users.isComponentModalActive}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[e._m(0),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){return e.close_form()}}})]),s("section",{staticClass:"modal-card-body"},[s("section",{staticClass:"container"},[s("b-steps",{scopedSlots:e._u([{key:"navigation",fn:function(t){t.previous,t.next;return[s("div",{staticClass:"columns mt-1 is-mobile"},[0!==e.$store.state.users.step?s("b-button",{staticClass:"column is-2 mx-2",attrs:{"icon-right":"arrow-left",type:"is-primary",size:"is-medium",expanded:""},on:{click:function(t){return t.preventDefault(),e.previousStep()}}}):e._e(),3===e.$store.state.users.step?s("b-button",{staticClass:"column",attrs:{type:"is-primary",size:"is-medium",loading:e.isLoading,expanded:""},on:{click:e.submit}},[e._v("¡Enviar solicitud!")]):e._e(),0!==e.$store.state.users.step&&3!==e.$store.state.users.step?s("b-button",{staticClass:"column",attrs:{"icon-right":"arrow-right",type:"is-primary",size:"is-medium",expanded:""},on:{click:function(t){return t.preventDefault(),e.nextStep()}}},[e._v("Siguiente")]):e._e()],1)]}}],null,!1,2773171782),model:{value:e.$store.state.users.step,callback:function(t){e.$set(e.$store.state.users,"step",t)},expression:"$store.state.users.step"}},[s("b-step-item",{attrs:{clickable:!1,label:"Trámite",icon:"file-document"}},[s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-vertical is-12"},[s("div",{staticClass:"tile"},[s("div",{staticClass:"tile is-parent is-vertical"},e._l(e.tramites,(function(t){return s("MediaOption",{key:t.value,staticClass:"tile is-child notification is-primary dgw-option",attrs:{item:t},on:{selected:function(t){return e.optionSelected(1,t)}}})})),1)])])])]),s("b-step-item",{attrs:{clickable:!1,label:"Requisitos",icon:"file-document-edit"}},[s("OptionsDescription",{attrs:{option:e.$store.state.users.schoolRequest.type}}),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-12"},[s("div",[s("RequestForm",{ref:"step1",attrs:{option:e.$store.state.users.schoolRequest.type,user:e.user,schoolRequest:e.schoolRequest,request:e.request}})],1)])])],1),s("b-step-item",{attrs:{clickable:!1,label:"Datos",icon:"account"}},[s("StudentDataForm",{ref:"step2",attrs:{user:e.user,student:e.studentForm,careers:e.careers}})],1),s("b-step-item",{attrs:{clickable:!1,label:"Archivos",icon:"cloud-upload"}},[s("b-message",{staticClass:"message",attrs:{title:"Carga de documentos",type:"is-primary","has-icon":"",size:"is-small",icon:"paperclip",closable:!1}},[s("strong",[e._v("¡IMPORTANTE!")]),e._v(" "),s("br"),e._v(" Solo se aceptan documentos en formato (.jpg, .jpeg, .png, .pdf) con un peso máximo de "),s("b",[e._v("4Mb")]),e._v(". "),s("br"),e._v(" Si cuenta con un documento subido anteriormente puede usar ese mismo, no es necesario hacer nada en ese caso. "),s("br")]),s("UploadsModalForm",{ref:"step3",attrs:{option:e.$store.state.users.schoolRequest.type,schoolRequest:e.schoolRequest,student:e.studentForm,uploadsList:e.uploads}})],1)],1)],1)])])])])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"modal-card-title title-size"},[s("b",[e._v("Solicitud de documentos")])])}],r=s("2f62"),a=s("7698"),n=s("2646"),c=s("e15a"),u={async mounted(){this.$store.commit("students/BASIC",{key:"studentForm",value:this.user.student||{}}),this.$store.commit("users/SET_STEP",0),this.studentOriginal.enrollment=this.studentForm.enrollment,this.studentOriginal.career=this.studentForm.career,this.studentOriginal.admission=this.studentForm.admission},data(){return{file:null,isLoading:!1,careers:n["a"],request:{otherDescription:"",vacation:!1,extra_info:{}},studentOriginal:{enrollment:"",career:"",admission:""},tramites:c["c"],uploads:{files:[],tags:[]}}},components:{MediaOption:()=>s.e("chunk-2d0d0ee9").then(s.bind(null,"69a1")),OptionsDescription:()=>s.e("chunk-2d2252af").then(s.bind(null,"e2f2")),RequestForm:()=>s.e("chunk-2d224c64").then(s.bind(null,"e223")),StudentDataForm:()=>s.e("chunk-2d0b2b37").then(s.bind(null,"24dc")),UploadsModalForm:()=>s.e("chunk-2abe720d").then(s.bind(null,"52ee"))},computed:{...Object(r["b"])("users",["user","schoolRequest"]),...Object(r["b"])("students",["studentForm"])},methods:{show_form(e){this.$store.commit("users/SHOW_FORM",e)},optionSelected(e,t){this.$store.commit("users/SET_STEP",e),this.$store.commit("users/SET_TYPE",t.value)},async nextStep(){let e;switch(this.$store.state.users.step){case 1:if(e=await this.$refs.step1.$refs.form1.validate(),!e)return;this.$refs.step1.$refs.form1.$nextTick(()=>this.$store.commit("users/SET_STEP",this.$store.state.users.step+=1));break;case 2:if(e=await this.$refs.step2.$refs.form2.validate(),!e)return;this.$refs.step1.$refs.form1.$nextTick(()=>this.$store.commit("users/SET_STEP",this.$store.state.users.step+=1));break;default:break}},previousStep(){let e=this.$store.state.users.step;e-=1,this.$store.commit("users/SET_STEP",e),0==this.$store.state.users.step&&this.reload()},async reload(){await this.$store.commit("users/CLEAR_REQ"),await this.$store.dispatch("users/getUser"),this.studentForm.enrollment=this.studentOriginal.enrollment,this.studentForm.career=this.studentOriginal.career,this.studentForm.admission=this.studentOriginal.admission;for(let e in this.uploads)this.uploads[e].file=null},close_form(){0!=this.$store.state.users.step?this.$buefy.dialog.confirm({title:"¡Hey!",message:"Estás en proceso de realizar una solicitud. ¿Deseas cancelarla?",cancelText:"Continuar",confirmText:"Salir",type:"is-danger",hasIcon:!0,onConfirm:async()=>{this.$buefy.toast.open({message:"Solicitud cancelada",type:"is-danger"}),this.request.otherDescription="",this.request.vacation=!1,this.reload(),this.show_form(!1),this.$store.commit("users/SET_STEP",0)}}):this.close_form_direc()},close_form_direc(){this.request.otherDescription="",this.request.vacation=!1,this.reload(),this.show_form(!1),this.$store.commit("users/SET_STEP",0)},async submit(){let e="";this.schoolRequest.description?("OTRO"===this.schoolRequest.description&&(this.schoolRequest.description=this.request.otherDescription.toUpperCase(),this.request.otherDescription=""),this.request.vacation&&(this.schoolRequest.description+=" CON PERÍODO VACACIONAL",this.request.vacation=!1),this.user.CURP&&(this.user.CURP=this.user.CURP.toUpperCase()),this.studentForm.enrollment=this.studentForm.enrollment.toUpperCase(),e="Revisa que tus datos sean correctos.\n        Has seleccionado el trámite: "+this.$store.state.users.schoolRequest.type+" de tipo: "+this.schoolRequest.description):e="Revisa que tus datos sean correctos.\n        Has seleccionado el trámite: "+this.$store.state.users.schoolRequest.type,this.$buefy.dialog.confirm({title:"¡Por último!",message:e,cancelText:"Cancelar",confirmText:"Enviar",type:"is-info",hasIcon:!0,onConfirm:async()=>{this.isLoading=!0;try{var e=this.user;await this.$store.dispatch("users/update",{user:e});var t=this.studentForm,s=this.uploads;await this.$store.dispatch("students/update",{studentForm:t,files:s});await Object(a["a"])({...this.schoolRequest,...this.request});for(var i in this.uploads.files)null!=this.uploads.files[i]&&this.$refs.step3.uploadFile(this.uploads.files[i],this.uploads.tags[i]);this.$buefy.toast.open({message:"¡Solicitud enviada correctamente!",type:"is-success"}),this.reload(),this.show_form(!1),this.$store.commit("users/SET_STEP",0)}catch(o){console.log(o),this.$dw.messages.alertErrorDialog({title:"No es posible realizar el trámite",message:"Revisa que no tengas un trámite pendiente de tipo: "+this.schoolRequest.type+" e intenta de nuevo."}).then(()=>{this.close_form_direc()})}finally{this.isLoading=!1}}})}}},l=u,d=(s("5a04"),s("2877")),m=Object(d["a"])(l,i,o,!1,null,null,null);t["default"]=m.exports},d3e5:function(e,t,s){e.exports=s.p+"img/undraw_doctor_kw5l.e60823ba.svg"},e15a:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return r}));const i={NORMAL:"NORMAL",SITUR:"SITUR",PROMEDIO:"PROMEDIO",OTRO:"OTRO"},o={ALTA:"ALTA",BAJA:"BAJA"},r={CONSTANCIA:{value:"CONSTANCIA",label:"Constancia de estudios",req:"Requiere fotografía e INE",icon:s("c116")},IMSS:{value:"IMSS",label:"Alta/Baja IMSS",req:"Requiere NSS, CURP e INE",icon:s("d3e5")},SEGUIMIENTO:{value:"SEGUIMIENTO",label:"Seguimiento académico (Kardex)",req:"Requiere INE",icon:s("c116")},HORARIO:{value:"HORARIO",label:"Horario escolar",req:"Requiere INE",icon:s("bbbc")},TITULATION:{value:"TITULACIÓN",label:"Titulación",req:"Solo alumnos de 9º o mayor ingreso",icon:s("8dfc")}}}}]);