(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-602a228c"],{"45b8":function(t,e,s){"use strict";var i=s("820c"),n=s.n(i);n.a},"820c":function(t,e,s){},e459:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("hero-bar",[t._v(" Cuestionario: "+t._s(t.info.name)+" "),s("router-link",{staticClass:"button is-light",attrs:{slot:"right",to:"/edit-profile"},slot:"right"},[s("b-icon",{attrs:{icon:"account-edit","custom-size":"default"}}),s("span",[t._v("Completar Perfil")])],1)],1),s("notification",{staticClass:"is-primary"},[s("div",[s("b-icon",{attrs:{icon:"medical-bag","custom-size":"default"}}),t._v(t._s(t.info.description)+" ")],1)]),s("b-loading",{attrs:{"is-full-page":"",active:t.isLoading,"can-cancel":!1}}),t.sections?s("section",[s("b-steps",{attrs:{"has-navigation":!1}},t._l(t.sections.filter((function(t){return t.is_active})),(function(e){return s("b-step-item",{key:e.id,attrs:{clickable:"",label:e.name,icon:"account"}},[s("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(i){var n=i.handleSubmit;return[s("b-collapse",{staticClass:"card",attrs:{animation:"slide"},scopedSlots:t._u([{key:"trigger",fn:function(i){return[s("div",{staticClass:"card-header",attrs:{role:"button"}},[s("p",{staticClass:"card-header-title"},[t._v(" "+t._s(e.description)+" ")]),s("a",{staticClass:"card-header-icon"},[s("b-icon",{attrs:{icon:i.open?"menu-down":"menu-up"}})],1)])]}}],null,!0)},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("div",{staticClass:"columns is-multiline"},[s("form",{on:{submit:function(e){return e.preventDefault(),n(t.submit)}}},[t._l(e.questions,(function(e,i){return s("QuestionGenerator",{key:e.id,ref:"form",refInFor:!0,staticClass:"column is-12",attrs:{form:t.form,index:i+1,question:e}})})),s("button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"button",type:"submit"}})],2)])])])]),s("b-navbar",{attrs:{"fixed-bottom":"","mobile-burger":!0},scopedSlots:t._u([{key:"brand",fn:function(){},proxy:!0},{key:"burger",fn:function(){return[s("b-navbar-item",{staticClass:"field is-grouped is-grouped-right",attrs:{tag:"div"}},[s("p",{staticClass:"control"},[s("label",{staticClass:"button is-primary",attrs:{for:"button"}},[t._v(" Enviar ")])]),s("p",{staticClass:"control"},[s("a",{staticClass:"button is-light",on:{click:t.cancel}},[t._v(" Cancelar ")])])])]},proxy:!0}],null,!0)})]}}],null,!0)})],1)})),1)],1):t._e()],1)},n=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["Input"===t.question.type?s("b-field",{attrs:{label:t.index+". "+t.question.text}},[s("b-input",{attrs:{required:"",expanded:"",placeholder:"Especifique..."},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1):t._e(),"Text"===t.question.type?s("b-field",{attrs:{label:t.index+". "+t.question.text}},[s("b-input",{attrs:{required:"",expanded:"",placeholder:"Especifique...",type:"textarea"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1):t._e(),"Selection"===t.question.type?s("b-field",{attrs:{label:t.index+". "+t.question.text}},[s("b-select",{attrs:{required:""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[s("option",{domProps:{value:null}},[t._v("Seleccione una opción")]),t._l(t.question.options,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)],1):t._e(),"Checkbox"===t.question.type?[s("b-field",{attrs:{label:t.index+". "+t.question.text}}),t._l(t.question.options,(function(e){return s("b-field",{key:e},[s("b-checkbox",{attrs:{required:"",size:"-is-small","native-value":e},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}},[t._v(t._s(e))])],1)}))]:t._e(),"Binary"===t.question.type?[s("b-field",{attrs:{label:t.index+". "+t.question.text}}),s("b-field",t._l(t.question.options,(function(e){return s("b-radio",{key:e,attrs:{required:"",size:"-is-small","native-value":e},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(e))])})),1)]:t._e()],2)},o=[],r={props:{index:Number,form:Object,question:Object},data(){return{radio:null,select:null,checkbox:[],text:""}},methods:{getValue(){let t=this.text;switch(this.question.type){case"Selection":t=this.select;break;case"Checkbox":t=this.checkbox;break;case"Binary":t=this.radio;break}return t}}},c=r,l=(s("45b8"),s("2877")),u=Object(l["a"])(c,a,o,!1,null,"73e74e91",null),d=u.exports,b={name:"PersonalForm",props:{id:String},components:{QuestionGenerator:d},data(){return{form:{data:{}},isLoading:!1,isOpen:0,info:{},sections:[],questions:[],collapses:[{title:"ANTECEDENTES PERSONALES",text:"Text 1"},{title:"ANTECEDENTES FAMILIARES",text:"Text 2"}]}},async created(){this.isLoading=!0;try{const t=await this.$store.dispatch("questionaries/getInfo",this.id);this.info=t,this.sections=t.sections,this.questions=t.sections.questions,this.form.user=this.$store.state.users.user.id,this.form.poll=t.id}catch(t){console.log(t)}finally{this.isLoading=!1}},methods:{cancel(){this.$buefy.dialog.confirm({title:"Abandonar cuestionario",message:"Estas seguro de <b>abandonar</b> el cuestionario? No se guardaran tus respuestas",confirmText:"Si, Salir",cancelText:"Continuar respondiendo",type:"is-warning",hasIcon:!0,onConfirm:()=>this.$router.go(-1)})},async submit(){this.$buefy.dialog.confirm({title:"Enviar cuestionario",message:"Estas seguro de <b>enviar</b> el cuestionario? No podŕas cambiar tus respuestas",confirmText:"Si, enviar",cancelText:"Continuar respondiendo",type:"is-warning",hasIcon:!0,onConfirm:async()=>{this.$refs.form.forEach(t=>{this.form.data["Q"+t.question.id]=t.getValue()});try{console.log(this.form),await this.$store.dispatch("questionaries/sendAnswers",this.form),this.$router.go(-1),this.$swal({title:"Bien hecho!",text:"Se enviara el resultado de las respuestas a su correo.",type:"success",icon:"success",buttons:!1,timer:1500})}catch(t){this.$swal({title:"Algo ha salido mal :(",text:"Revisa tus respuestas y asegurate de no dejar ninguna en blanco",type:"danger",buttons:!1,icon:"error",dangerMode:!0})}}})}}},p=b,f=Object(l["a"])(p,i,n,!1,null,null,null);e["default"]=f.exports}}]);