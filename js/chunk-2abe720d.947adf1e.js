(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2abe720d"],{"02fe":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"container"},[a("b-modal",{attrs:{width:640,scroll:"keep"},model:{value:e.isCardModalActive,callback:function(t){e.isCardModalActive=t},expression:"isCardModalActive"}},[a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[e._v(e._s(e.label))]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){return e.toggleModal()}}})]),a("section",{staticClass:"modal-card-body"},["PDF"==e.ext?a("embed",{attrs:{type:"application/pdf",src:e.url,width:"100%",height:"700"}}):a("b-image",{attrs:{src:e.url,alt:"A random image"}})],1),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button is-primary",on:{click:function(t){return e.toggleModal()}}},[e._v(" Cerrar ")])])])])],1)])},i=[],l={name:"DocumentPreview",props:{url:{type:String,default:""},label:{type:String,default:"Visualizaci√≥n de archivo"}},data(){return{isCardModalActive:!1,ext:""}},methods:{toggleModal(){this.getExt(this.url),this.isCardModalActive=!this.isCardModalActive},toggleModalRefresh(e){this.getExt(e),this.isCardModalActive=!this.isCardModalActive},getExt(e){const t=e.split(".").pop(),a=t.split("?")[0];this.ext=a}}},o=l,r=a("2877"),n=Object(r["a"])(o,s,i,!1,null,null,null);t["a"]=n.exports},"52ee":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ValidationObserver",{ref:"form3"},[a("request-document-preview",{ref:"RequestModalPreview",attrs:{url:e.url,label:e.label}}),e._l(e.documents,(function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.showFile(t.name),expression:"showFile(doc.name)"}],key:s,staticClass:"mb-3"},[a("BUploadWithValidation",{staticClass:"file is-primary",attrs:{rules:"size:4000"+("PDF"===t.type?"|pdf":"|img")+(e.validateChange(t.name)?"":"|required"),label:t.name,message:"Selecciona tu "+t.name+" ("+t.type+")",isChanging:e.validateChange(t.name)},on:{viewFile:function(a){return e.viewFile(t.name)},input:function(a){e.uploadsList.tags[s]=t.name}},model:{value:e.uploadsList.files[s],callback:function(t){e.$set(e.uploadsList.files,s,t)},expression:"uploadsList.files[i]"}})],1)}))],2)},i=[],l=a("02fe"),o={name:"UploadsModalForm",components:{RequestDocumentPreview:l["a"]},props:{option:{type:String},schoolRequest:{type:Object,default:null},uploadsList:{type:Object,default:null}},data(){return{uploads:[],documents:[],url:"",label:""}},mounted(){this.getFiles()},methods:{viewFile(e){for(let t in this.uploads){const a=this.uploads[t];if(a.document==e){this.url=a.file,this.label=a.document,this.$refs.RequestModalPreview.toggleModalRefresh(this.url);break}}},showFile(e){return"INE Frente"==e||"INE Posterior"==e||("CONSTANCIA"==this.schoolRequest.type?"Foto personal"==e:"IMSS"==this.schoolRequest.type&&("CURP"==e||"Vigencia de Seguro Social"==e))},uploadFile(e,t){let a={file:e,tag:t},s=!1;for(let o in this.uploads)this.uploads[o].document===t&&(a=this.uploads[o],a.file=e,a.tag=t,s=!0);const i=new FormData;for(var l in a)i.append(l,a[l]);this.$store.dispatch("uploads/upload",{form_data:i,uuid:s})},async getFiles(){const e=await this.$store.dispatch("uploads/getList"),t=await this.$store.dispatch("uploads/getDocuments");this.uploads=e,this.documents=t},validateChange(e){for(let t in this.uploads)if(this.uploads[t].document==e)return!0;return!1}}},r=o,n=a("2877"),d=Object(n["a"])(r,s,i,!1,null,null,null);t["default"]=d.exports}}]);