(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e18efb32"],{"02fe":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",[e("div",{staticClass:"container"},[e("b-modal",{attrs:{width:640,scroll:"keep"},model:{value:t.isCardModalActive,callback:function(s){t.isCardModalActive=s},expression:"isCardModalActive"}},[e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head has-text-centered"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.label))]),e("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(s){return t.toggleModal()}}})]),e("section",{staticClass:"modal-card-body"},["PDF"==t.ext?e("embed",{attrs:{type:"application/pdf",src:t.url,width:"100%",height:"700"}}):e("b-image",{attrs:{src:t.url,alt:"A random image"}})],1),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button is-primary",on:{click:function(s){return t.toggleModal()}}},[t._v(" Cerrar ")])])])])],1)])},a=[],n={name:"DocumentPreview",props:{url:{type:String,default:""},label:{type:String,default:"Visualización de archivo"}},data(){return{isCardModalActive:!1,ext:""}},methods:{toggleModal(){this.getExt(this.url),this.isCardModalActive=!this.isCardModalActive},toggleModalRefresh(t){this.getExt(t),this.isCardModalActive=!this.isCardModalActive},getExt(t){const s=t.split(".").pop(),e=s.split("?")[0];this.ext=e}}},l=n,o=e("2877"),r=Object(o["a"])(l,i,a,!1,null,null,null);s["a"]=r.exports},"75f6":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"section"},[e("div",{staticClass:"tabs is-boxed is-centered main-menu",attrs:{id:"nav"}},[e("ul",t._l(t.headers,(function(s,i){return e("li",{key:i,class:{"is-active":t.listQuery.status===s.value},attrs:{"data-target":"pane-"+i,id:i},on:{click:function(e){t.listQuery.status=s.value}}},[e("a",[e("b-icon",{class:s.type,attrs:{icon:s.icon,"custom-size":"default"}}),e("span",{staticClass:"is-hidden-mobile"},[t._v(t._s(s.header))])],1)])})),0)]),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-12"},[e("div",{staticClass:"box content"},[t.requests&&(t.requests&&t.requests.length>0)?e("notification",{staticClass:"is-primary"},[e("div",[e("b-icon",{attrs:{icon:"checkbox-marked-circle","custom-size":"default"}}),t._v(" "),e("b",[t._v("¡Hola!")]),t._v(" Aquí podrás ver tus solicitudes "+t._s(t.status[t.listQuery.status]+"S")+". ")],1)]):e("notification",{staticClass:"is-primary"},[e("div",[e("b-icon",{attrs:{icon:"alert","custom-size":"default"}}),t._v(" "),e("b",[t._v("Aún no tienes solicitudes "+t._s(t.status[t.listQuery.status]+"S"))]),t._v(" Cuando tengas alguna aparecerá aquí. ")],1)]),e("notification",[e("div",[e("b-dropdown",{attrs:{"aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("b-button",{staticClass:"subtitle is-6 has-text-light",attrs:{label:""==t.listQuery.type?"Tipo de trámite":t.listQuery.type,type:"is-primary","icon-right":"menu-down"}})]},proxy:!0}]),model:{value:t.listQuery.type,callback:function(s){t.$set(t.listQuery,"type",s)},expression:"listQuery.type"}},t._l(t.types,(function(s){return e("b-dropdown-item",{key:s,attrs:{disabled:t.listQuery.type==s,"aria-role":"listitem"},on:{click:function(e){t.listQuery.type=s}}},[e("div",{staticClass:"media"},[e("div",{staticClass:"media-content"},[e("p",{staticClass:"subtitle is-6"},[t._v(t._s(""==s?"TODOS":s))])])])])})),1)],1)]),t.requests&&!(t.requests.length<1)||t.isLoading?t._e():e("section",{staticClass:"section"},[e("div",{staticClass:"content has-text-grey has-text-centered"},[[e("p",[e("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),e("p",[t._v("Aún no hay nada por aquí…")])]],2)]),t.isLoading?e("Skeleton"):t._l(t.requests,(function(s,i){return e("b-collapse",{key:s.uuid,staticClass:"collapse",attrs:{animation:"slide",open:t.isOpen==i},on:{open:function(s){t.isOpen=i}},scopedSlots:t._u([{key:"trigger",fn:function(i){return[e("article",{staticClass:"post",attrs:{role:"button"}},[e("span",["IMSS"==s.type?e("h4",{staticClass:"title"},[e("b-icon",{attrs:{size:"is-small",icon:"medical-bag"}}),t._v(" "+t._s(s.description)+" "+t._s(s.type)+" ")],1):"SEGUIMIENTO"==s.type?e("h4",{staticClass:"title"},[e("b-icon",{attrs:{size:"is-small",icon:"chair-school"}}),t._v(" "+t._s(s.type)+" ")],1):"HORARIO"===s.type?e("h4",[e("b-icon",{attrs:{size:"is-small",icon:"calendar"}}),t._v(t._s(s.description)+" "+t._s(s.type)+" ")],1):"TITULACIÓN"==s.type?[e("h4",{staticClass:"title"},[e("b-icon",{attrs:{size:"is-small",icon:"school"}}),t._v(" "+t._s(s.type)+" ")],1),e("p",{staticClass:"subtitle is-5"},[t._v(" "+t._s(s.titulation.plan.name)+" por "+t._s(s.titulation.option.name)+" "),e("router-link",{attrs:{title:"Ver documentos",to:"/titulation/"+s.titulation.id}},[e("b-icon",{attrs:{size:"is-small",icon:"open-in-new"}})],1)],1)]:e("h4",[t._v(t._s(s.type)+" "+t._s(s.description))])],2),e("div",{staticClass:"media level"},[e("div",{staticClass:"media-content level-left"},[e("div",{staticClass:"content"},[e("p",[t._v(" Solicitado hace "+t._s(t._f("timeSince")(s.created_at))+" "),e("span",{staticClass:"tag",class:t.requests_types[s.status]},[t._v(t._s(t.status[s.status]))])])])]),e("a",{staticClass:"level-right"},[e("b-icon",{attrs:{size:"is-medium",icon:i.open?"menu-up":"menu-down"}})],1)])]),e("span")]}}],null,!0)},[e("div",{staticClass:"card-content"},[s.responses.length<=0||"PENDING"===s.status?e("p",[t._v(" Aún no se han anexado respuestas a tu solicitud. ")]):t._l(s.responses,(function(i,a){return e("a",{key:a,staticClass:"level box dgw-option",attrs:{href:i.file,target:"_blank"}},[e("div",{staticClass:"level-left"},[e("span",{staticClass:"subtitle is-6"},[t._v(t._s(a+1)+".- "+t._s(s.type)+" "+t._s(s.description)+" ")])]),e("div",{staticClass:"level-right"},[t._v(" Recibido hace "+t._s(t._f("timeSince")(i.created_at))+" ")])])}))],2)])})),t.requests&&(t.requests.length<t.total&&t.listQuery.offset<t.total)?e("b-button",{staticClass:"button is-light",attrs:{expanded:""},on:{click:function(s){return t.loadMore()}}},[e("strong",[t._v("Cargar más")])]):t._e()],2)])])])},a=[],n=(e("ddb0"),e("2f62")),l=e("7698");const o={PENDING:"PENDIENTE",VIEWED:"REVISADA",READY:"LISTA",ARCHIVED:"ARCHIVADA"},r={PENDING:"is-warning",VIEWED:"is-info",READY:"is-success",ARCHIVED:"is-danger"},c={ALL:"",CONSTANCIA:"CONSTANCIA",SEGUIMIENTO:"SEGUIMIENTO",IMSS:"IMSS",HORARIO:"HORARIO"},u={PENDING:{header:"Pendientes",icon:"file-alert",type:"has-text-warning",value:"PENDING"},READY:{header:"Listas",icon:"file-check",type:"has-text-success",value:"READY"},ARCHIVED:{header:"Archivadas",icon:"folder-open",type:"has-text-danger",value:"ARCHIVED"}};var d=e("02fe"),p={name:"Requests",components:{Skeleton:()=>e.e("chunk-2d0c206f").then(e.bind(null,"490d")),RequestDocumentPreview:d["a"]},data(){return{isOpen:null,currentTab:"PENDING",isLoading:!0,requests:[],status:o,requests_types:r,types:c,headers:u,listQuery:{status:"PENDING",type:"",limit:10,offset:0},total:0,isINEModalActive:!1,isPhotoModalActive:!1}},computed:{titleStack(){return["Admin","Dashboard"]},...Object(n["b"])("users",["user"])},mounted(){this.getData()},watch:{listQuery:{handler(){this.isOpen=null,this.getData()},deep:!0}},methods:{async getData(t=1){this.isLoading=!0;try{this.listQuery.offset=this.listQuery.limit*(t-1);const s=await Object(l["b"])(this.listQuery);this.total=s.count,this.requests=s.results,console.log(this.requests)}catch(s){}finally{this.isLoading=!1}},async loadMore(){this.isLoading=!0;try{this.listQuery.offset+=this.listQuery.limit;const t=await Object(l["b"])(this.listQuery);this.setRequests([...this.requests,...t.results])}catch(t){}finally{this.isLoading=!1}},setRequests(t){this.requests=t},randomChartData(t){}}},h=p,v=(e("7695"),e("2877")),m=Object(v["a"])(h,i,a,!1,null,"406d4d7a",null);s["default"]=m.exports},7695:function(t,s,e){"use strict";var i=e("f279"),a=e.n(i);a.a},7698:function(t,s,e){"use strict";e.d(s,"b",(function(){return a})),e.d(s,"a",(function(){return n}));var i=e("a27e");function a(t){return Object(i["a"])({url:"/users/me/tramites/",method:"GET",params:t})}function n(t){return Object(i["a"])({url:"/users/me/tramites/",method:"POST",data:t})}},f279:function(t,s,e){}}]);