(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c38b5ac4"],{"0a6e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("hero-bar-main",{attrs:{user:t.$store.state.users.user,student:t.$store.state.users.student}}),s("section",{staticClass:"section is-main-section"},[s("tiles",[s("card-widget",{staticClass:"tile is-child",attrs:{type:"is-warning",icon:"file-alert",number:t.requestsCount.RPending,"previous-number":384,"previous-period":"Aug, 2020",label:"Pendientes"}}),s("card-widget",{staticClass:"tile is-child",attrs:{type:"is-success",icon:"file-check",number:t.requestsCount.RReady,"previous-number":100,"previous-period":"Aug, 2020",label:"Listas"}}),s("card-widget",{staticClass:"tile is-child",attrs:{type:"is-danger",icon:"folder-open",number:t.requestsCount.RArchived,"previous-number":100,"previous-period":"Aug, 2020",label:"Archivadas"}}),s("card-widget",{staticClass:"tile is-child",attrs:{type:"is-primary",icon:"school",number:t.students,"previous-number":2,label:"Estudiantes","previous-period":"Aug, 2020"}})],1),s("requests-table",{attrs:{requestsCount:t.requestsCount,"data-url":"https://digital-window.herokuapp.com/"}}),s("students-table",{attrs:{"data-url":"https://digital-window.herokuapp.com/"}}),s("departments-table",{attrs:{"data-url":"https://digital-window.herokuapp.com/"}})],1)],1)},o=[],i=s("f755"),n=s("6636"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("card-component",{staticClass:"has-table has-mobile-sort-spaced",attrs:{title:"Solicitudes",icon:"file-document-outline","has-button-slot":!0}},[s("refresh-button",{attrs:{slot:"button",label:"Actualizar"},on:{"button-click":t.actionSample},slot:"button"}),s("card-toolbar",{staticClass:"is-upper",attrs:{slot:"toolbar"},slot:"toolbar"},[s("div",{staticClass:"buttons has-addons",attrs:{slot:"left"},slot:"left"},[s("button",{staticClass:"button",class:{"is-active":"PENDING"===t.listQuery.status},on:{click:function(e){t.listQuery.status="PENDING",t.getData()}}},[s("b-icon",{staticClass:"has-text-warning",attrs:{icon:"file-alert","custom-size":"default"}}),s("span",[t._v("Pendientes")])],1),s("button",{staticClass:"button",class:{"is-active":"READY"===t.listQuery.status},on:{click:function(e){t.listQuery.status="READY",t.getData()}}},[s("b-icon",{staticClass:"has-text-success",attrs:{icon:"file-check","custom-size":"default"}}),s("span",[t._v("Listas")])],1),s("button",{staticClass:"button",class:{"is-active":"ARCHIVED"===t.listQuery.status},on:{click:function(e){t.listQuery.status="ARCHIVED",t.getData()}}},[s("b-icon",{staticClass:"has-text-danger",attrs:{icon:"folder-open","custom-size":"default"}}),s("span",[t._v("Archivadas")])],1)]),s("div",{attrs:{slot:"right"},slot:"right"},[s("b-dropdown",{attrs:{position:"is-bottom-left","append-to-body":"","aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(e){var a=e.active;return s("button",{staticClass:"button is-primary"},[s("span",[t._v("Acciones")]),s("b-icon",{attrs:{icon:a?"menu-up":"menu-down"}})],1)}}])},[s("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.onAction("ready")}}},[t._v("Marcar como terminadas")]),s("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.onAction("archived")}}},[t._v("Marcar como archivados")]),s("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.onAction("pending")}}},[t._v("Marcar como pendientes")]),s("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.onAction("excel")}}},[t._v("Exportar como excel")])],1)],1)]),s("modal-box",{attrs:{"is-active":t.isModalActive,"trash-object-name":t.trashObjectName},on:{confirm:t.trashConfirm,cancel:t.trashCancel}}),s("b-table",{attrs:{data:t.requests,striped:!1,hoverable:!0,checkable:!0,"checked-rows":t.checkedRows,loading:t.isLoading,paginated:!0,"current-page":t.current_page,"per-page":t.listQuery.limit,total:t.total,"backend-pagination":"","backend-sorting":""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e},"page-change":t.onPageChange,sort:t.onSort,check:t.onChecked}},[s("b-table-column",{attrs:{label:"Fecha",field:"date",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(e.row.date).toLocaleDateString())+" ")]}}])}),s("b-table-column",{attrs:{label:"Trámite",field:"type",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("article",{staticClass:"media"},[s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("p",[s("strong",[t._v(t._s(e.row.type))])])])])])]}}])}),s("b-table-column",{attrs:{label:"Descripción",field:"description"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.description?s("small",{staticClass:"tag is-primary"},[t._v(" "+t._s(e.row.description))]):t._e()]}}])}),s("b-table-column",{attrs:{label:"Alumno",field:"enrollment"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.student.enrollment)+" ")]}}])}),s("b-table-column",{attrs:{label:"Estado",field:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"tag",class:t.requests_types[e.row.status]},[t._v(" "+t._s(t.status[e.row.status])+" ")])]}}])}),s("b-table-column",{attrs:{label:"Acciones","custom-key":"actions","cell-class":"is-actions-cell"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},["PENDING"==e.row.status?s("button",{staticClass:"button is-small is-primary",attrs:{type:"button"}},[s("b-tooltip",{attrs:{type:"is-dark",label:"Subir archivo",position:"is-top"}},[s("b-icon",{attrs:{icon:"upload",size:"is-small"}})],1)],1):t._e(),"READY"==e.row.status||"ARCHIVED"==e.row.status?s("button",{staticClass:"button is-small is-warning",attrs:{type:"button"},on:{click:function(s){return t.changeOneStatus(e.row.uuid,"PENDING")}}},[s("b-tooltip",{attrs:{type:"is-dark",label:"Cambiar solicitud a pendiente",position:"is-top"}},[s("b-icon",{attrs:{icon:"file-alert",size:"is-small"}})],1)],1):t._e(),"PENDING"==e.row.status||"ARCHIVED"==e.row.status?s("button",{staticClass:"button is-small is-success",attrs:{type:"button"},on:{click:function(s){return t.changeOneStatus(e.row.uuid,"READY")}}},[s("b-tooltip",{attrs:{type:"is-dark",label:"Cambiar solicitud a listo",position:"is-top"}},[s("b-icon",{attrs:{icon:"checkbox-marked-circle-outline",size:"is-small"}})],1)],1):t._e(),"READY"==e.row.status||"PENDING"==e.row.status?s("button",{staticClass:"button is-small is-danger",attrs:{type:"button"},on:{click:function(s){return t.changeOneStatus(e.row.uuid,"ARCHIVED")}}},[s("b-tooltip",{attrs:{type:"is-dark",label:"Archivar solicitud",position:"is-top"}},[s("b-icon",{attrs:{icon:"folder-move",size:"is-small"}})],1)],1):t._e(),s("button",{staticClass:"button is-small is-primary",attrs:{type:"button"}},[s("b-tooltip",{attrs:{type:"is-dark",label:"Eliminar solicitud",position:"is-top"}},[s("b-icon",{attrs:{icon:"delete",size:"is-small"}})],1)],1)])]}}])}),s("section",{staticClass:"section",attrs:{slot:"empty"},slot:"empty"},[s("div",{staticClass:"content has-text-grey has-text-centered"},[t.isLoading?[s("p",[s("b-icon",{attrs:{icon:"dots-horizontal",size:"is-large"}})],1),s("p",[t._v("Cargando...")])]:[s("p",[s("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),s("p",[t._v("Aún no hay nada por aquí…")])]],2)])],1)],1)},l=[],c=(s("ddb0"),s("7698")),u=s("72d0"),d=s("6ffa");const b={methods:{formatJson(t,e){return e.map(e=>t.map(t=>"date"===t?new Date(e[t]).toLocaleDateString():"student"===t?e[t].enrollment:e[t]))},handleDownload(t,e,a,o){console.log(t,e,a,o),s.e("chunk-444ac47d").then(s.bind(null,"8530")).then(s=>{const i=this.formatJson(a,t);s.export_json_to_excel({header:e,data:i,filename:o,autoWidth:!0,bookType:"xlsx"})})}}};var h=b,p={name:"RequestsTable",mixins:[h],components:{ModalBox:u["a"]},props:{dataUrl:{type:String,default:null},checkable:{type:Boolean,default:!1},requestsCount:{}},data(){return{isModalActive:!1,trashObject:null,requests:[],action:"",total:0,isLoading:!1,paginated:!1,listQuery:{status:"PENDING",limit:10,offset:0},current_page:1,checkedRows:[],selectedRowsUuid:[],requests_types:d["a"],status:d["b"]}},computed:{trashObjectName(){return this.trashObject?this.trashObject.name:null}},mounted(){this.getData()},methods:{async onSort(t,e){console.log(t,e),this.listQuery.sortBy=[t],this.listQuery.sortDesc=["desc"===e],this.getData()},async dashboardRefresh(){this.getData()},async getData(){if(this.dataUrl){this.checkedRows=[],this.isLoading=!0,this.listQuery.offset=this.listQuery.limit*(this.current_page-1);let t=await Object(c["b"])(this.listQuery);console.log(t),this.isLoading=!1,this.requests=t.results,this.total=t.count}},trashModal(t){this.trashObject=t,this.isModalActive=!0},trashConfirm(){this.isModalActive=!1,this.$buefy.snackbar.open({message:"Confirmed",queue:!1})},trashCancel(){this.isModalActive=!1},onChecked(t){const e=t.map(t=>t.uuid);this.selectedRowsUuid=e},onAction(t){switch(t){case"ready":this.$buefy.dialog.confirm({title:"Cambiar solicitudes a listo",message:"Estás a punto de cambiar el estado de las solicitudes seleccionadas ¿Estás seguro?",cancelText:"Cancelar",confirmText:"Confirmar",type:"is-success",hasIcon:!0,icon:"alert",onConfirm:async()=>{await this.selectedRowsUuid.forEach(t=>{this.changeStatus(t,"READY")}),await this.getData(),this.$buefy.toast.open({duration:7e3,message:"¡Logrado! Se notificará a los estudiantes correspondientes",type:"is-success"})}});break;case"excel":if(this.checkedRows.length>0){const t=["Fecha","Matrícula","Tipo","Descripción"],e=["date","student","type","description"],s=this.getTodayString();this.handleDownload(this.checkedRows,t,e,"Solicitudes_"+s)}else this.$buefy.toast.open({duration:7e3,message:"Seleccione al menos una solicitud para generar el excel",type:"is-danger",queue:!1});break;case"archived":this.$dw.messages.errorDialog({title:"Archivar solicitudes",message:"Estás a punto de archivar las solicitudes seleccionadas ¿Estás seguro?"}).then(async()=>{await this.selectedRowsUuid.forEach(t=>{this.changeStatus(t,"ARCHIVED")}),await this.getData(),this.$buefy.toast.open({duration:7e3,message:"¡Logrado! Se notificará a los estudiantes correspondientes",type:"is-danger"})});break;case"pending":this.$buefy.dialog.confirm({title:"Marcar solicitudes como pendientes",message:"Estás a punto de cambiar a pendiente el estado de las solicitudes seleccionadas ¿Estás seguro?",cancelText:"Cancelar",confirmText:"Confirmar",type:"is-warning",hasIcon:!0,icon:"alert",onConfirm:async()=>{const t=[];this.selectedRowsUuid.forEach(e=>{t.push(this.changeStatus(e,"PENDING"))}),await Promise.all(t),this.$buefy.toast.open({duration:7e3,message:"¡Logrado! Se notificará a los estudiantes correspondientes",type:"is-warning"})}});break;default:break}},async actionSample(){await this.getData(this.current_page),this.$buefy.toast.open({message:"Actualizado",type:"is-info",queue:!1})},onPageChange(t){this.current_page=t,this.getData()},changeOneStatus(t,e){let s="is-success",a="Cambiar solicitud a listo";"ARCHIVED"==e?(s="is-danger",a="Archivar solicitud"):"PENDING"==e&&(s="is-warning",a="Cambiar solicitud a pendiente"),this.$buefy.dialog.confirm({title:a,message:"Estás a punto de cambiar el estado de la solicitud seleccionada ¿Estás seguro?",cancelText:"Cancelar",confirmText:"Confirmar",type:s,hasIcon:!0,icon:"alert",onConfirm:async()=>{await this.changeStatus(t,e),await this.getData(),this.$buefy.toast.open({duration:7e3,message:"¡Logrado! Se notificará a los estudiantes correspondientes",type:s})}})},async changeStatus(t,e){const s={status:e};try{const e=await Object(c["c"])(t,s);Promise.resolve(e)}catch(a){Promise.reject(a)}}}},m=p,f=(s("4bba"),s("2877")),g=Object(f["a"])(m,r,l,!1,null,null,null),y=g.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("card-component",{staticClass:"has-table has-mobile-sort-spaced",attrs:{title:"Estudiantes",icon:"school","has-button-slot":!0}},[s("refresh-button",{attrs:{slot:"button"},on:{"button-click":t.actionSample},slot:"button"}),s("card-toolbar",{staticClass:"is-upper",attrs:{slot:"toolbar"},slot:"toolbar"},[s("div",{staticClass:"buttons has-addons",attrs:{slot:"left"},slot:"left"},[s("b-dropdown",{attrs:{"aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(e){var a=e.active;return s("button",{staticClass:"button is-primary"},[s("span",[t._v("Acciones")]),s("b-icon",{attrs:{icon:a?"menu-up":"menu-down"}})],1)}}])},[s("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Action")]),s("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Another action")]),s("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Something else")])],1)],1),s("form",{attrs:{slot:"right"},on:{submit:function(e){return e.preventDefault(),t.actionSample(e)}},slot:"right"},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.listQuery.q,expression:"listQuery.q"}],staticClass:"input",attrs:{type:"text",placeholder:"Search by name..."},domProps:{value:t.listQuery.q},on:{input:[function(e){e.target.composing||t.$set(t.listQuery,"q",e.target.value)},function(e){return t.getData()}]}})]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[s("b-icon",{attrs:{icon:"account-search","custom-size":"default"}})],1)])])])]),s("modal-box",{attrs:{"is-active":t.isModalActive,"trash-object-name":t.trashObjectName},on:{confirm:t.trashConfirm,cancel:t.trashCancel}}),s("b-table",{attrs:{data:t.clients,striped:!1,hoverable:!0,checkable:!0,"checked-rows":t.checkedRows,loading:t.isLoading,paginated:!0,"per-page":t.listQuery.limit,total:t.total,"backend-pagination":"","backend-sorting":""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e},"page-change":t.getData,sort:t.onSort}},[s("b-table-column",{attrs:{label:"Nombre",field:"name",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.user.first_name)+" ")]}}])}),s("b-table-column",{attrs:{label:"Apellidos",field:"last_name",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.user.last_name)+" ")]}}])}),s("b-table-column",{attrs:{label:"Matrícula",field:"enrollment",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.enrollment)+" ")]}}])}),s("b-table-column",{attrs:{label:"Carrera",field:"career",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-tooltip",{attrs:{label:t.careers[e.row.career],position:"is-bottom"}},[s("span",[t._v(t._s(e.row.career))])])]}}])}),s("b-table-column",{attrs:{label:"Ingreso",field:"admission",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.admission)+" ")]}}])}),s("b-table-column",{attrs:{label:"Acciones","custom-key":"actions","cell-class":"is-actions-cell"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("router-link",{staticClass:"button is-small is-info",attrs:{to:{name:"client.edit",params:{uuid:e.row.uuid}}}},[s("b-tooltip",{attrs:{type:"is-dark",label:"Información del estudiante",position:"is-top"}},[s("b-icon",{attrs:{icon:"information-outline",size:"is-small"}})],1)],1),s("button",{staticClass:"button is-small is-danger",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.trashModal(e.row)}}},[s("b-icon",{attrs:{icon:"folder-move",size:"is-small"}})],1)],1)]}}])}),s("section",{staticClass:"section",attrs:{slot:"empty"},slot:"empty"},[s("div",{staticClass:"content has-text-grey has-text-centered"},[t.isLoading?[s("p",[s("b-icon",{attrs:{icon:"dots-horizontal",size:"is-large"}})],1),s("p",[t._v("Cargando...")])]:[s("p",[s("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),s("p",[t._v("Aún no hay nada por aquí…")])]],2)])],1)],1)},C=[],w=s("762d"),k=s("2646"),_={name:"RequestsTable",components:{ModalBox:u["a"]},props:{dataUrl:{type:String,default:null},checkable:{type:Boolean,default:!1}},data(){return{isModalActive:!1,trashObject:null,clients:[],total:0,isLoading:!1,paginated:!1,listQuery:{limit:5,offset:0},checkedRows:[],careers:k["a"]}},computed:{trashObjectName(){return this.trashObject?this.trashObject.name:null}},mounted(){this.getData()},methods:{onSort(t,e){console.log(t,e),this.listQuery.sortBy=[t],this.listQuery.sortDesc=["desc"===e],this.getData()},async getData(t=1){if(this.dataUrl){this.isLoading=!0,this.listQuery.offset=this.listQuery.limit*(t-1);const e=await Object(w["d"])(this.listQuery);this.isLoading=!1,this.clients=e.results,this.total=e.count}},trashModal(t){this.trashObject=t,this.isModalActive=!0},trashConfirm(){this.isModalActive=!1,this.$buefy.snackbar.open({message:"Confirmed",queue:!1})},trashCancel(){this.isModalActive=!1},actionSample(){this.listQuery={limit:5,offset:0},this.getData(),this.$buefy.toast.open({message:"Members refreshed",type:"is-info",queue:!1})}}},D=_,A=(s("cd0c"),Object(f["a"])(D,v,C,!1,null,null,null)),S=A.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("card-component",{staticClass:"has-table has-mobile-sort-spaced",attrs:{title:"Departamentos",icon:"office-building","has-button-slot":!0}},[s("refresh-button",{attrs:{slot:"button"},on:{"button-click":t.actionSample},slot:"button"}),s("card-toolbar",{staticClass:"is-upper",attrs:{slot:"toolbar"},slot:"toolbar"},[s("div",{staticClass:"buttons has-addons",attrs:{slot:"left"},slot:"left"},[s("b-dropdown",{attrs:{"aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(e){var a=e.active;return s("button",{staticClass:"button is-primary"},[s("span",[t._v("Acciones")]),s("b-icon",{attrs:{icon:a?"menu-up":"menu-down"}})],1)}}])},[s("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Action")]),s("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Another action")]),s("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Something else")])],1)],1),s("form",{attrs:{slot:"right"},on:{submit:function(e){return e.preventDefault(),t.actionSample(e)}},slot:"right"},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.listQuery.q,expression:"listQuery.q"}],staticClass:"input",attrs:{type:"text",placeholder:"Search by name..."},domProps:{value:t.listQuery.q},on:{input:[function(e){e.target.composing||t.$set(t.listQuery,"q",e.target.value)},function(e){return t.getData()}]}})]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[s("b-icon",{attrs:{icon:"account-search","custom-size":"default"}})],1)])])])]),s("modal-box",{attrs:{"is-active":t.isModalActive,"trash-object-name":t.trashObjectName},on:{confirm:t.trashConfirm,cancel:t.trashCancel}}),s("b-table",{attrs:{data:t.clients,striped:!1,hoverable:!0,checkable:!0,"checked-rows":t.checkedRows,loading:t.isLoading,paginated:!0,"per-page":t.listQuery.limit,total:t.total,"backend-pagination":"","backend-sorting":""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e},"page-change":t.getData,sort:t.onSort}},[s("b-table-column",{attrs:{label:"Departamentos",field:"name",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),s("b-table-column",{attrs:{label:"Responsable",field:"head",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.head)+" ")]}}])}),s("b-table-column",{attrs:{label:"Contacto",field:"contact",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.contact)+" ")]}}])}),s("b-table-column",{attrs:{label:"Acciones","custom-key":"actions","cell-class":"is-actions-cell"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"buttons"},[s("router-link",{staticClass:"button is-small is-primary",attrs:{to:{name:"client.edit",params:{id:e.row.id}}}},[s("b-icon",{attrs:{icon:"download",size:"is-small"}})],1),s("button",{staticClass:"button is-small is-danger",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.trashModal(e.row)}}},[s("b-icon",{attrs:{icon:"folder-move",size:"is-small"}})],1)],1)]}}])}),s("section",{staticClass:"section",attrs:{slot:"empty"},slot:"empty"},[s("div",{staticClass:"content has-text-grey has-text-centered"},[t.isLoading?[s("p",[s("b-icon",{attrs:{icon:"dots-horizontal",size:"is-large"}})],1),s("p",[t._v("Cargando...")])]:[s("p",[s("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),s("p",[t._v("Aún no hay nada por aquí…")])]],2)])],1)],1)},E=[],x=s("a27e");function Q(t){return Object(x["a"])({url:"/departments/",method:"GET",params:t})}var q={name:"DepartmentsTable",components:{ModalBox:u["a"]},props:{dataUrl:{type:String,default:null},checkable:{type:Boolean,default:!1}},data(){return{isModalActive:!1,trashObject:null,clients:[],total:0,isLoading:!1,paginated:!1,listQuery:{limit:5,offset:0},checkedRows:[]}},computed:{trashObjectName(){return this.trashObject?this.trashObject.name:null}},mounted(){this.getData()},methods:{onSort(t,e){console.log(t,e),this.listQuery.sortBy=[t],this.listQuery.sortDesc=["desc"===e],this.getData()},async getData(t=1){if(this.dataUrl){this.isLoading=!0,this.listQuery.offset=this.listQuery.limit*(t-1);const e=await Q(this.listQuery);console.log(e),this.isLoading=!1,this.clients=e.results,this.total=e.count}},trashModal(t){this.trashObject=t,this.isModalActive=!0},trashConfirm(){this.isModalActive=!1,this.$buefy.snackbar.open({message:"Confirmed",queue:!1})},trashCancel(){this.isModalActive=!1},actionSample(){this.listQuery={limit:5,offset:0},this.getData(),this.$buefy.toast.open({message:"Members refreshed",type:"is-info",queue:!1})}}},O=q,M=(s("5be4"),Object(f["a"])(O,R,E,!1,null,null,null)),j=M.exports,N={name:"dashboard",components:{HeroBarMain:()=>s.e("chunk-4271b03e").then(s.bind(null,"3121")),RequestsTable:y,StudentsTable:S,DepartmentsTable:j,LineChart:n["a"]},data(){return{defaultChart:{chartData:null,extraOptions:i["b"]},students:0,requestsCount:{RPending:0,RReady:0,RArchived:0}}},computed:{titleStack(){return["Administrador","Panel de control"]}},mounted(){this.fillChartData(),this.getData(),this.$buefy.snackbar.open({message:"Bienvenido",queue:!1})},methods:{async getData(){const t=await Object(w["d"])();console.log(t),this.students=t.count},randomChartData(t){const e=[];for(let s=0;s<t;s++)e.push(Math.round(200*Math.random()));return e},fillChartData(){this.defaultChart.chartData={datasets:[{fill:!1,borderColor:i["a"].default.primary,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:i["a"].default.primary,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:i["a"].default.primary,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:this.randomChartData(9)},{fill:!1,borderColor:i["a"].default.info,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:i["a"].default.info,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:i["a"].default.info,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:this.randomChartData(9)},{fill:!1,borderColor:i["a"].default.danger,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:i["a"].default.danger,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:i["a"].default.danger,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:this.randomChartData(9)}],labels:["01","02","03","04","05","06","07","08","09"]}}}},B=N,z=Object(f["a"])(B,a,o,!1,null,null,null);e["default"]=z.exports},3186:function(t,e,s){},"4bba":function(t,e,s){"use strict";var a=s("a1b7"),o=s.n(a);o.a},"5be4":function(t,e,s){"use strict";var a=s("8191"),o=s.n(a);o.a},8191:function(t,e,s){},a1b7:function(t,e,s){},cd0c:function(t,e,s){"use strict";var a=s("3186"),o=s.n(a);o.a}}]);