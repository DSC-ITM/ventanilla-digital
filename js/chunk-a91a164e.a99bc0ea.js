(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a91a164e"],{"19ee":function(e,t,s){},4933:function(e,t,s){"use strict";var i=s("19ee"),n=s.n(i);n.a},e459:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("hero-bar",[e._v(" Cuestionario: "+e._s(e.info.name)+" "),s("router-link",{staticClass:"button is-light",attrs:{slot:"right",to:"/edit-profile"},slot:"right"},[s("b-icon",{attrs:{icon:"account-edit","custom-size":"default"}}),s("span",[e._v("Completar Perfil")])],1)],1),s("notification",{staticClass:"is-primary"},[s("div",[s("b-icon",{attrs:{icon:"medical-bag","custom-size":"default"}}),e._v(e._s(e.info.description)+" ")],1)]),s("b-loading",{attrs:{"is-full-page":"",active:e.isLoading,"can-cancel":!1}}),e.sections?s("section",[s("b-steps",{attrs:{"has-navigation":!1}},e._l(e.sections.filter((function(e){return e.is_active})),(function(t){return s("b-step-item",{key:t.id,attrs:{clickable:"",label:t.name,icon:"account"}},[s("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(i){var n=i.handleSubmit;return[s("b-collapse",{staticClass:"card",attrs:{animation:"slide"},scopedSlots:e._u([{key:"trigger",fn:function(i){return[s("div",{staticClass:"card-header",attrs:{role:"button"}},[s("p",{staticClass:"card-header-title"},[e._v(" "+e._s(t.description)+" ")]),s("a",{staticClass:"card-header-icon"},[s("b-icon",{attrs:{icon:i.open?"menu-down":"menu-up"}})],1)])]}}],null,!0)},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("div",{staticClass:"columns is-multiline"},[s("form",{on:{submit:function(t){return t.preventDefault(),n(e.submit)}}},[e._l(t.questions,(function(t,i){return s("QuestionGenerator",{key:t.id,ref:"form",refInFor:!0,staticClass:"column is-12",attrs:{form:e.form,index:i+1,question:t}})})),s("button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"button",type:"submit"}})],2)])])])]),s("b-navbar",{attrs:{"fixed-bottom":"","mobile-burger":!0},scopedSlots:e._u([{key:"brand",fn:function(){},proxy:!0},{key:"burger",fn:function(){return[s("b-navbar-item",{staticClass:"field is-grouped is-grouped-right",attrs:{tag:"div"}},[s("p",{staticClass:"control"},[s("label",{staticClass:"button is-primary",attrs:{for:"button"}},[e._v(" Enviar ")])]),s("p",{staticClass:"control"},[s("a",{staticClass:"button is-light",on:{click:e.cancel}},[e._v(" Cancelar ")])])])]},proxy:!0}],null,!0)})]}}],null,!0)})],1)})),1)],1):e._e()],1)},n=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",["Input"===e.question.type?s("b-field",{attrs:{label:e.index+". "+e.question.text}},[s("b-input",{attrs:{required:"",expanded:"",placeholder:"Especifique..."},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1):e._e(),"Text"===e.question.type?s("b-field",{attrs:{label:e.index+". "+e.question.text}},[s("b-input",{attrs:{required:"",expanded:"",placeholder:"Especifique...",type:"textarea"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1):e._e(),"Selection"===e.question.type?s("b-field",{attrs:{label:e.index+". "+e.question.text}},[s("b-select",{attrs:{required:""},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[s("option",{domProps:{value:null}},[e._v("Seleccione una opción")]),e._l(e.question.options,(function(t){return s("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2)],1):e._e(),"Checkbox"===e.question.type?[s("b-field",{attrs:{label:e.index+". "+e.question.text}}),e._l(e.question.options,(function(t){return s("b-field",{key:t},[s("b-checkbox",{attrs:{required:"",size:"-is-small","native-value":t},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}},[e._v(e._s(t))])],1)}))]:e._e(),"Binary"===e.question.type?[s("b-field",{attrs:{label:e.index+". "+e.question.text}}),s("b-field",e._l(e.question.options,(function(t){return s("b-radio",{key:t,attrs:{required:"",size:"-is-small","native-value":t},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(t))])})),1)]:e._e()],2)},o=[],r={props:{index:Number,form:Object,question:Object},data(){return{radio:null,select:null,checkbox:[],text:""}},methods:{getValue(){let e=this.text;switch(this.question.type){case"Selection":e=this.select;break;case"Checkbox":e=this.checkbox;break;case"Binary":e=this.radio;break}return e}}},l=r,c=(s("4933"),s("2877")),u=Object(c["a"])(l,a,o,!1,null,"6199485a",null),d=u.exports,b={name:"PersonalForm",props:{id:String},components:{QuestionGenerator:d},data(){return{form:{data:{}},isLoading:!1,isOpen:0,info:{},sections:[],questions:[],collapses:[{title:"ANTECEDENTES PERSONALES",text:"Text 1"},{title:"ANTECEDENTES FAMILIARES",text:"Text 2"}]}},async created(){this.isLoading=!0;try{const e=await this.$store.dispatch("questionaries/getInfo",this.id);this.info=e,this.sections=e.sections,this.questions=e.sections.questions,this.form.user=this.$store.state.users.user.id,this.form.poll=e.id}catch(e){console.log(e)}finally{this.isLoading=!1}},methods:{cancel(){this.$buefy.dialog.confirm({title:"Abandonar cuestionario",message:"Estas seguro de <b>abandonar</b> el cuestionario? No se guardaran tus respuestas",confirmText:"Si, Salir",cancelText:"Continuar respondiendo",type:"is-warning",hasIcon:!0,onConfirm:()=>this.$router.go(-1)})},async submit(){this.$buefy.dialog.confirm({title:"Enviar cuestionario",message:"Estas seguro de <b>enviar</b> el cuestionario? No podŕas cambiar tus respuestas",confirmText:"Si, enviar",cancelText:"Continuar respondiendo",type:"is-warning",hasIcon:!0,onConfirm:async()=>{this.$refs.form.forEach(e=>{this.form.data["Q"+e.question.id]=e.getValue()});try{console.log(this.form),await this.$store.dispatch("questionaries/sendAnswers",this.form),this.$router.go(-1),this.$swal({title:"Bien hecho!",text:"Se enviara el resultado de las respuestas a su correo.",type:"success",icon:"success",buttons:!1,timer:1500})}catch(e){this.$swal({title:"Algo ha salido mal :(",text:"Revisa tus respuestas y asegurate de no dejar ninguna en blanco",type:"danger",buttons:!1,icon:"error",dangerMode:!0})}}})}}},p=b,f=Object(c["a"])(p,i,n,!1,null,null,null);t["default"]=f.exports}}]);