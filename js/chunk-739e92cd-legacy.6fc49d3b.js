(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-739e92cd"],{"0a6e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("hero-bar-main",{attrs:{user:t.$store.state.users.user,student:t.$store.state.users.student}}),a("section",{staticClass:"section is-main-section"},[a("tiles",[a("card-widget",{staticClass:"tile is-child",attrs:{type:"is-warning",icon:"file-alert",number:t.stats.pending,"previous-number":2,"previous-period":"Septiembre, 2020",label:"Pendientes"}}),a("card-widget",{staticClass:"tile is-child",attrs:{type:"is-success",icon:"file-check",number:t.stats.ready,"previous-number":1,"previous-period":"Septiembre, 2020",label:"Listas"}}),a("card-widget",{staticClass:"tile is-child",attrs:{type:"is-danger",icon:"folder-open",number:t.stats.archived,"previous-number":5,"previous-period":"Septiembre, 2020",label:"Archivadas"}}),a("card-widget",{staticClass:"tile is-child",attrs:{type:"is-primary",icon:"school",number:t.stats.students,"previous-number":2,label:"Estudiantes","previous-period":"Septiembre, 2020"}})],1),a("requests-table",{attrs:{requestsCount:0,"data-url":"https://digital-window.herokuapp.com/"}}),a("students-table",{attrs:{"data-url":"https://digital-window.herokuapp.com/"}}),a("departments-table",{attrs:{"data-url":"https://digital-window.herokuapp.com/"}})],1)],1)},n=[],o=(a("d3b7"),a("96cf"),a("1da1")),i=a("5530"),r=a("2f62"),c=a("f755"),l=a("6636"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card-component",{staticClass:"has-table has-mobile-sort-spaced",attrs:{title:"Solicitudes",icon:"file-document-outline","has-button-slot":!0}},[a("refresh-button",{attrs:{slot:"button",label:"Actualizar"},on:{"button-click":t.actionSample},slot:"button"}),a("card-toolbar",{staticClass:"is-upper",attrs:{slot:"toolbar"},slot:"toolbar"},[a("div",{staticClass:"buttons has-addons",attrs:{slot:"left"},slot:"left"},[a("button",{staticClass:"button",class:{"is-active":"PENDING"===t.listQuery.status},on:{click:function(e){t.listQuery.status="PENDING",t.getData()}}},[a("b-icon",{staticClass:"has-text-warning",attrs:{icon:"file-alert","custom-size":"default"}}),a("span",[t._v("Pendientes")])],1),a("button",{staticClass:"button",class:{"is-active":"READY"===t.listQuery.status},on:{click:function(e){t.listQuery.status="READY",t.getData()}}},[a("b-icon",{staticClass:"has-text-success",attrs:{icon:"file-check","custom-size":"default"}}),a("span",[t._v("Listas")])],1),a("button",{staticClass:"button",class:{"is-active":"ARCHIVED"===t.listQuery.status},on:{click:function(e){t.listQuery.status="ARCHIVED",t.getData()}}},[a("b-icon",{staticClass:"has-text-danger",attrs:{icon:"folder-open","custom-size":"default"}}),a("span",[t._v("Archivadas")])],1)]),a("div",{attrs:{slot:"right"},slot:"right"},[a("b-dropdown",{attrs:{position:"is-bottom-left","append-to-body":"","aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(e){var s=e.active;return a("button",{staticClass:"button is-primary"},[a("span",[t._v("Por página: "+t._s(t.listQuery.limit))]),a("b-icon",{attrs:{icon:s?"menu-up":"menu-down"}})],1)}}])},[a("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){t.listQuery.limit=5,t.getData()}}},[t._v("5")]),a("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){t.listQuery.limit=10,t.getData()}}},[t._v("10")]),a("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){t.listQuery.limit=25,t.getData()}}},[t._v("25")]),a("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){t.listQuery.limit=50,t.getData()}}},[t._v("50")])],1),a("b-dropdown",{attrs:{position:"is-bottom-left","append-to-body":"","aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(e){var s=e.active;return a("button",{staticClass:"button is-primary"},[a("span",[t._v("Acciones")]),a("b-icon",{attrs:{icon:s?"menu-up":"menu-down"}})],1)}}])},["READY"!==t.listQuery.status?a("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.onAction("ready")}}},[a("div",{staticClass:"media"},[a("b-icon",{staticClass:"has-text-success media-left",attrs:{icon:"file-check"}}),a("div",{staticClass:"media-content"},[a("h3",[t._v("Marcar como terminadas")])])],1)]):t._e(),"ARCHIVED"!==t.listQuery.status?a("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.onAction("archived")}}},[a("div",{staticClass:"media"},[a("b-icon",{staticClass:"has-text-danger media-left",attrs:{icon:"folder-open"}}),a("div",{staticClass:"media-content"},[a("h3",[t._v("Marcar como archivados")])])],1)]):t._e(),"PENDING"!==t.listQuery.status?a("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.onAction("pending")}}},[a("div",{staticClass:"media"},[a("b-icon",{staticClass:"has-text-warning media-left",attrs:{icon:"file-alert"}}),a("div",{staticClass:"media-content"},[a("h3",[t._v("Marcar como pendientes")])])],1)]):t._e(),a("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.onAction("excel")}}},[a("div",{staticClass:"media"},[a("b-icon",{staticClass:"has-text-primary media-left",attrs:{icon:"file-excel-box"}}),a("div",{staticClass:"media-content"},[a("h3",[t._v("Exportar como excel")])])],1)])],1)],1)]),a("modal-box",{attrs:{"is-active":t.isModalActive,"trash-object-name":t.trashObjectName},on:{confirm:t.trashConfirm,cancel:t.trashCancel}}),a("b-table",{attrs:{data:t.requests,striped:!1,hoverable:!0,checkable:!0,"checked-rows":t.checkedRows,loading:t.isLoading,paginated:!0,"current-page":t.current_page,"per-page":t.listQuery.limit,total:t.total,"backend-pagination":"","backend-sorting":""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e},"page-change":t.onPageChange,sort:t.onSort,check:t.onChecked}},[a("b-table-column",{attrs:{label:"Fecha",field:"date",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(e.row.date).toLocaleDateString())+" ")]}}])}),a("b-table-column",{attrs:{label:"Trámite",field:"type",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("article",{staticClass:"media"},[a("div",{staticClass:"media-content"},[a("div",{staticClass:"content"},[a("p",[a("strong",[t._v(t._s(e.row.type))])])])])])]}}])}),a("b-table-column",{attrs:{label:"Descripción",field:"description"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.description?a("small",{staticClass:"tag is-primary"},[t._v(" "+t._s(e.row.description))]):t._e()]}}])}),a("b-table-column",{attrs:{label:"Alumno",field:"enrollment"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.student.enrollment)+" ")]}}])}),a("b-table-column",{attrs:{label:"Estado",field:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"tag",class:t.requests_types[e.row.status]},[t._v(" "+t._s(t.status[e.row.status])+" ")])]}}])}),a("b-table-column",{attrs:{label:"Acciones","custom-key":"actions","cell-class":"is-actions-cell"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"buttons"},["PENDING"==e.row.status?a("button",{staticClass:"button is-small is-primary",attrs:{type:"button"}},[a("b-tooltip",{attrs:{type:"is-dark",label:"Subir archivo",position:"is-top"}},[a("b-icon",{attrs:{icon:"upload",size:"is-small"}})],1)],1):t._e(),"READY"==e.row.status||"ARCHIVED"==e.row.status?a("button",{staticClass:"button is-small is-warning",attrs:{type:"button"},on:{click:function(a){return t.changeOneStatus(e.row.uuid,"PENDING")}}},[a("b-tooltip",{attrs:{type:"is-dark",label:"Cambiar solicitud a pendiente",position:"is-top"}},[a("b-icon",{attrs:{icon:"file-alert",size:"is-small"}})],1)],1):t._e(),"PENDING"==e.row.status||"ARCHIVED"==e.row.status?a("button",{staticClass:"button is-small is-success",attrs:{type:"button"},on:{click:function(a){return t.changeOneStatus(e.row.uuid,"READY")}}},[a("b-tooltip",{attrs:{type:"is-dark",label:"Cambiar solicitud a listo",position:"is-top"}},[a("b-icon",{attrs:{icon:"checkbox-marked-circle-outline",size:"is-small"}})],1)],1):t._e(),"READY"==e.row.status||"PENDING"==e.row.status?a("button",{staticClass:"button is-small is-danger",attrs:{type:"button"},on:{click:function(a){return t.changeOneStatus(e.row.uuid,"ARCHIVED")}}},[a("b-tooltip",{attrs:{type:"is-dark",label:"Archivar solicitud",position:"is-top"}},[a("b-icon",{attrs:{icon:"folder-move",size:"is-small"}})],1)],1):t._e(),a("button",{staticClass:"button is-small is-primary",attrs:{type:"button"}},[a("b-tooltip",{attrs:{type:"is-dark",label:"Eliminar solicitud",position:"is-top"}},[a("b-icon",{attrs:{icon:"delete",size:"is-small"}})],1)],1)])]}}])}),a("section",{staticClass:"section",attrs:{slot:"empty"},slot:"empty"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[t.isLoading?[a("p",[a("b-icon",{attrs:{icon:"dots-horizontal",size:"is-large"}})],1),a("p",[t._v("Cargando...")])]:[a("p",[a("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),a("p",[t._v("Aún no hay nada por aquí…")])]],2)])],1)],1)},d=[],p=(a("4160"),a("d81d"),a("b0c0"),a("3ca3"),a("159b"),a("ddb0"),a("7698")),b=a("72d0"),m=a("6ffa"),h={methods:{formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"date"===t?new Date(e[t]).toLocaleDateString():"student"===t?e[t].enrollment:e[t]}))}))},handleDownload:function(t,e,s,n){var o=this;console.log(t,e,s,n),a.e("chunk-b595bb5e").then(a.bind(null,"8530")).then((function(a){var i=o.formatJson(s,t);a.export_json_to_excel({header:e,data:i,filename:n,autoWidth:!0,bookType:"xlsx"})}))}}},f=h,g={name:"RequestsTable",mixins:[f],components:{ModalBox:b["a"]},props:{dataUrl:{type:String,default:null},checkable:{type:Boolean,default:!1},requestsCount:{}},data:function(){return{isModalActive:!1,trashObject:null,requests:[],action:"",total:0,isLoading:!1,paginated:!1,listQuery:{status:"PENDING",limit:10,offset:0},current_page:1,checkedRows:[],selectedRowsUuid:[],requests_types:m["a"],status:m["b"]}},computed:{trashObjectName:function(){return this.trashObject?this.trashObject.name:null}},mounted:function(){this.getData()},methods:{onSort:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:console.log(t,e),a.listQuery.sortBy=[t],a.listQuery.sortDesc=["desc"===e],a.getData();case 4:case"end":return s.stop()}}),s)})))()},dashboardRefresh:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("requests/getStats");case 1:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.dataUrl){e.next=11;break}return t.checkedRows=[],t.isLoading=!0,t.listQuery.offset=t.listQuery.limit*(t.current_page-1),e.next=6,Object(p["b"])(t.listQuery);case 6:a=e.sent,console.log(a),t.isLoading=!1,t.requests=a.results,t.total=a.count;case 11:case"end":return e.stop()}}),e)})))()},trashModal:function(t){this.trashObject=t,this.isModalActive=!0},trashConfirm:function(){this.isModalActive=!1,this.$buefy.snackbar.open({message:"Confirmed",queue:!1})},trashCancel:function(){this.isModalActive=!1},onChecked:function(t){var e=t.map((function(t){return t.uuid}));this.selectedRowsUuid=e},onAction:function(t){var e=this;if(this.checkedRows.length>0)switch(t){case"ready":this.$dw.messages.warningDialog({title:"Cambiar solicitudes a listo",message:"Estás a punto de cambiar el estado de las solicitudes seleccionadas ¿Estás seguro?"}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],t.next=3,e.selectedRowsUuid.forEach((function(t){a.push(e.changeStatus(t,"READY"))}));case 3:return t.next=5,Promise.all(a);case 5:return e.dashboardRefresh(),t.next=8,e.getData();case 8:e.$dw.messages.successToast("¡Logrado! Se notificará a los estudiantes correspondientes");case 9:case"end":return t.stop()}}),t)}))));break;case"excel":var a=["Fecha","Matrícula","Tipo","Descripción"],s=["date","student","type","description"],n=this.getTodayString();this.handleDownload(this.checkedRows,a,s,"Solicitudes_"+n);break;case"archived":this.$dw.messages.warningDialog({title:"Archivar solicitudes",message:"Estás a punto de archivar las solicitudes seleccionadas ¿Estás seguro?"}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],t.next=3,e.selectedRowsUuid.forEach((function(t){a.push(e.changeStatus(t,"ARCHIVED"))}));case 3:return t.next=5,Promise.all(a);case 5:return e.dashboardRefresh(),t.next=8,e.getData();case 8:e.$dw.messages.successToast("¡Logrado! Se notificará a los estudiantes correspondientes");case 9:case"end":return t.stop()}}),t)}))));break;case"pending":this.$dw.messages.warningDialog({title:"Marcar solicitudes como pendientes",message:"Estás a punto de cambiar a pendiente el estado de las solicitudes seleccionadas ¿Estás seguro?"}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],t.next=3,e.selectedRowsUuid.forEach((function(t){a.push(e.changeStatus(t,"PENDING"))}));case 3:return t.next=5,Promise.all(a);case 5:return e.dashboardRefresh(),t.next=8,e.getData();case 8:e.$dw.messages.successToast("¡Logrado! Se notificará a los estudiantes correspondientes");case 9:case"end":return t.stop()}}),t)}))));break;default:break}else this.$dw.messages.errorToast("Seleccione al menos una solicitud para ejecutar una acción")},actionSample:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData(t.current_page);case 2:t.$buefy.toast.open({message:"Actualizado",type:"is-info",queue:!1});case 3:case"end":return e.stop()}}),e)})))()},onPageChange:function(t){this.current_page=t,this.getData()},changeOneStatus:function(t,e){var a=this,s="Cambiar solicitud a listo";"ARCHIVED"==e?s="Archivar solicitud":"PENDING"==e&&(s="Cambiar solicitud a pendiente"),this.$dw.messages.warningDialog({title:s,message:"Estás a punto de cambiar el estado de la solicitud seleccionada ¿Estás seguro?"}).then(Object(o["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a.changeStatus(t,e);case 2:return a.dashboardRefresh(),s.next=5,a.getData();case 5:a.$dw.messages.successToast("¡Logrado! Se notificará a los estudiantes correspondientes");case 6:case"end":return s.stop()}}),s)}))))},changeStatus:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={status:e},a.prev=1,a.next=4,Object(p["d"])(t,s);case 4:n=a.sent,Promise.resolve(n),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),Promise.reject(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()}}},v=g,w=(a("4bba"),a("2877")),y=Object(w["a"])(v,u,d,!1,null,null,null),k=y.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card-component",{staticClass:"has-table has-mobile-sort-spaced",attrs:{title:"Estudiantes",icon:"school","has-button-slot":!0}},[a("refresh-button",{attrs:{slot:"button"},on:{"button-click":t.actionSample},slot:"button"}),a("card-toolbar",{staticClass:"is-upper",attrs:{slot:"toolbar"},slot:"toolbar"},[a("div",{staticClass:"buttons has-addons",attrs:{slot:"left"},slot:"left"},[a("b-dropdown",{attrs:{"aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(e){var s=e.active;return a("button",{staticClass:"button is-primary"},[a("span",[t._v("Acciones")]),a("b-icon",{attrs:{icon:s?"menu-up":"menu-down"}})],1)}}])},[a("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Action")]),a("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Another action")]),a("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Something else")])],1)],1),a("form",{attrs:{slot:"right"},on:{submit:function(e){return e.preventDefault(),t.actionSample(e)}},slot:"right"},[a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.listQuery.q,expression:"listQuery.q"}],staticClass:"input",attrs:{type:"text",placeholder:"Search by name..."},domProps:{value:t.listQuery.q},on:{input:[function(e){e.target.composing||t.$set(t.listQuery,"q",e.target.value)},function(e){return t.getData()}]}})]),a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[a("b-icon",{attrs:{icon:"account-search","custom-size":"default"}})],1)])])])]),a("modal-box",{attrs:{"is-active":t.isModalActive,"trash-object-name":t.trashObjectName},on:{confirm:t.trashConfirm,cancel:t.trashCancel}}),a("b-table",{attrs:{data:t.clients,striped:!1,hoverable:!0,checkable:!0,"checked-rows":t.checkedRows,loading:t.isLoading,paginated:!0,"per-page":t.listQuery.limit,total:t.total,"backend-pagination":"","backend-sorting":""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e},"page-change":t.getData,sort:t.onSort}},[a("b-table-column",{attrs:{label:"Nombre",field:"name",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.user.first_name)+" ")]}}])}),a("b-table-column",{attrs:{label:"Apellidos",field:"last_name",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.user.last_name)+" ")]}}])}),a("b-table-column",{attrs:{label:"Matrícula",field:"enrollment",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.enrollment)+" ")]}}])}),a("b-table-column",{attrs:{label:"Carrera",field:"career",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-tooltip",{attrs:{label:t.careers[e.row.career],position:"is-bottom"}},[a("span",[t._v(t._s(e.row.career))])])]}}])}),a("b-table-column",{attrs:{label:"Ingreso",field:"admission",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.admission)+" ")]}}])}),a("b-table-column",{attrs:{label:"Acciones","custom-key":"actions","cell-class":"is-actions-cell"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"buttons"},[a("router-link",{staticClass:"button is-small is-info",attrs:{to:{name:"client.edit",params:{uuid:e.row.uuid}}}},[a("b-tooltip",{attrs:{type:"is-dark",label:"Información del estudiante",position:"is-top"}},[a("b-icon",{attrs:{icon:"information-outline",size:"is-small"}})],1)],1),a("button",{staticClass:"button is-small is-danger",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.trashModal(e.row)}}},[a("b-icon",{attrs:{icon:"folder-move",size:"is-small"}})],1)],1)]}}])}),a("section",{staticClass:"section",attrs:{slot:"empty"},slot:"empty"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[t.isLoading?[a("p",[a("b-icon",{attrs:{icon:"dots-horizontal",size:"is-large"}})],1),a("p",[t._v("Cargando...")])]:[a("p",[a("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),a("p",[t._v("Aún no hay nada por aquí…")])]],2)])],1)],1)},_=[],D=a("762d"),R=a("2646"),x={name:"RequestsTable",components:{ModalBox:b["a"]},props:{dataUrl:{type:String,default:null},checkable:{type:Boolean,default:!1}},data:function(){return{isModalActive:!1,trashObject:null,clients:[],total:0,isLoading:!1,paginated:!1,listQuery:{limit:5,offset:0},checkedRows:[],careers:R["a"]}},computed:{trashObjectName:function(){return this.trashObject?this.trashObject.name:null}},mounted:function(){this.getData()},methods:{onSort:function(t,e){console.log(t,e),this.listQuery.sortBy=[t],this.listQuery.sortDesc=["desc"===e],this.getData()},getData:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.length>0&&void 0!==t[0]?t[0]:1,!e.dataUrl){a.next=10;break}return e.isLoading=!0,e.listQuery.offset=e.listQuery.limit*(s-1),a.next=6,Object(D["c"])(e.listQuery);case 6:n=a.sent,e.isLoading=!1,e.clients=n.results,e.total=n.count;case 10:case"end":return a.stop()}}),a)})))()},trashModal:function(t){this.trashObject=t,this.isModalActive=!0},trashConfirm:function(){this.isModalActive=!1,this.$buefy.snackbar.open({message:"Confirmed",queue:!1})},trashCancel:function(){this.isModalActive=!1},actionSample:function(){this.listQuery={limit:5,offset:0},this.getData(),this.$buefy.toast.open({message:"Members refreshed",type:"is-info",queue:!1})}}},S=x,A=(a("cd0c"),Object(w["a"])(S,C,_,!1,null,null,null)),O=A.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card-component",{staticClass:"has-table has-mobile-sort-spaced",attrs:{title:"Departamentos",icon:"office-building","has-button-slot":!0}},[a("refresh-button",{attrs:{slot:"button"},on:{"button-click":t.actionSample},slot:"button"}),a("card-toolbar",{staticClass:"is-upper",attrs:{slot:"toolbar"},slot:"toolbar"},[a("div",{staticClass:"buttons has-addons",attrs:{slot:"left"},slot:"left"},[a("b-dropdown",{attrs:{"aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(e){var s=e.active;return a("button",{staticClass:"button is-primary"},[a("span",[t._v("Acciones")]),a("b-icon",{attrs:{icon:s?"menu-up":"menu-down"}})],1)}}])},[a("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Action")]),a("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Another action")]),a("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Something else")])],1)],1),a("form",{attrs:{slot:"right"},on:{submit:function(e){return e.preventDefault(),t.actionSample(e)}},slot:"right"},[a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.listQuery.q,expression:"listQuery.q"}],staticClass:"input",attrs:{type:"text",placeholder:"Search by name..."},domProps:{value:t.listQuery.q},on:{input:[function(e){e.target.composing||t.$set(t.listQuery,"q",e.target.value)},function(e){return t.getData()}]}})]),a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[a("b-icon",{attrs:{icon:"account-search","custom-size":"default"}})],1)])])])]),a("modal-box",{attrs:{"is-active":t.isModalActive,"trash-object-name":t.trashObjectName},on:{confirm:t.trashConfirm,cancel:t.trashCancel}}),a("b-table",{attrs:{data:t.clients,striped:!1,hoverable:!0,checkable:!0,"checked-rows":t.checkedRows,loading:t.isLoading,paginated:!0,"per-page":t.listQuery.limit,total:t.total,"backend-pagination":"","backend-sorting":""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e},"page-change":t.getData,sort:t.onSort}},[a("b-table-column",{attrs:{label:"Departamentos",field:"name",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),a("b-table-column",{attrs:{label:"Responsable",field:"head",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.head)+" ")]}}])}),a("b-table-column",{attrs:{label:"Contacto",field:"contact",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.contact)+" ")]}}])}),a("b-table-column",{attrs:{label:"Acciones","custom-key":"actions","cell-class":"is-actions-cell"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"buttons"},[a("router-link",{staticClass:"button is-small is-primary",attrs:{to:{name:"client.edit",params:{id:e.row.id}}}},[a("b-icon",{attrs:{icon:"download",size:"is-small"}})],1),a("button",{staticClass:"button is-small is-danger",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.trashModal(e.row)}}},[a("b-icon",{attrs:{icon:"folder-move",size:"is-small"}})],1)],1)]}}])}),a("section",{staticClass:"section",attrs:{slot:"empty"},slot:"empty"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[t.isLoading?[a("p",[a("b-icon",{attrs:{icon:"dots-horizontal",size:"is-large"}})],1),a("p",[t._v("Cargando...")])]:[a("p",[a("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),a("p",[t._v("Aún no hay nada por aquí…")])]],2)])],1)],1)},E=[],Q=a("a27e");function M(t){return Object(Q["a"])({url:"/departments/",method:"GET",params:t})}var q={name:"DepartmentsTable",components:{ModalBox:b["a"]},props:{dataUrl:{type:String,default:null},checkable:{type:Boolean,default:!1}},data:function(){return{isModalActive:!1,trashObject:null,clients:[],total:0,isLoading:!1,paginated:!1,listQuery:{limit:5,offset:0},checkedRows:[]}},computed:{trashObjectName:function(){return this.trashObject?this.trashObject.name:null}},mounted:function(){this.getData()},methods:{onSort:function(t,e){console.log(t,e),this.listQuery.sortBy=[t],this.listQuery.sortDesc=["desc"===e],this.getData()},getData:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.length>0&&void 0!==t[0]?t[0]:1,!e.dataUrl){a.next=11;break}return e.isLoading=!0,e.listQuery.offset=e.listQuery.limit*(s-1),a.next=6,M(e.listQuery);case 6:n=a.sent,console.log(n),e.isLoading=!1,e.clients=n.results,e.total=n.count;case 11:case"end":return a.stop()}}),a)})))()},trashModal:function(t){this.trashObject=t,this.isModalActive=!0},trashConfirm:function(){this.isModalActive=!1,this.$buefy.snackbar.open({message:"Confirmed",queue:!1})},trashCancel:function(){this.isModalActive=!1},actionSample:function(){this.listQuery={limit:5,offset:0},this.getData(),this.$buefy.toast.open({message:"Members refreshed",type:"is-info",queue:!1})}}},N=q,B=(a("5be4"),Object(w["a"])(N,j,E,!1,null,null,null)),$=B.exports,z={name:"dashboard",components:{HeroBarMain:function(){return a.e("chunk-667e511e").then(a.bind(null,"3121"))},RequestsTable:k,StudentsTable:O,DepartmentsTable:$,LineChart:l["a"]},data:function(){return{defaultChart:{chartData:null,extraOptions:c["b"]}}},computed:Object(i["a"])({titleStack:function(){return["Administrador","Panel de control"]}},Object(r["b"])("requests",["stats"])),mounted:function(){this.fillChartData(),this.$store.dispatch("requests/getStats"),this.$buefy.snackbar.open({message:"Bienvenido",queue:!1})},methods:{getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(D["c"])();case 2:a=e.sent,console.log(a),t.students=a.count;case 5:case"end":return e.stop()}}),e)})))()},randomChartData:function(t){for(var e=[],a=0;a<t;a++)e.push(Math.round(200*Math.random()));return e},fillChartData:function(){this.defaultChart.chartData={datasets:[{fill:!1,borderColor:c["a"].default.primary,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:c["a"].default.primary,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:c["a"].default.primary,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:this.randomChartData(9)},{fill:!1,borderColor:c["a"].default.info,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:c["a"].default.info,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:c["a"].default.info,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:this.randomChartData(9)},{fill:!1,borderColor:c["a"].default.danger,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:c["a"].default.danger,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:c["a"].default.danger,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:this.randomChartData(9)}],labels:["01","02","03","04","05","06","07","08","09"]}}}},L=z,P=Object(w["a"])(L,s,n,!1,null,null,null);e["default"]=P.exports},3186:function(t,e,a){},"3ca3":function(t,e,a){"use strict";var s=a("6547").charAt,n=a("69f3"),o=a("7dd0"),i="String Iterator",r=n.set,c=n.getterFor(i);o(String,"String",(function(t){r(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),a=e.string,n=e.index;return n>=a.length?{value:void 0,done:!0}:(t=s(a,n),e.index+=t.length,{value:t,done:!1})}))},"4bba":function(t,e,a){"use strict";var s=a("a1b7"),n=a.n(s);n.a},"5be4":function(t,e,a){"use strict";var s=a("8191"),n=a.n(s);n.a},"762d":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return i}));var s=a("a27e");function n(t){return Object(s["a"])({url:"/students/",method:"POST",data:t})}function o(t){return Object(s["a"])({url:"/students/",method:"GET",params:t})}function i(t){return Object(s["a"])({url:"/students/".concat(t,"/"),method:"GET"})}},8191:function(t,e,a){},a1b7:function(t,e,a){},cd0c:function(t,e,a){"use strict";var s=a("3186"),n=a.n(s);n.a}}]);