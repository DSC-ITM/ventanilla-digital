(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-041ece15","chunk-196752e9","chunk-14160ea8"],{"52dd":function(e,t,s){"use strict";var i=s("b205"),a=s.n(i);a.a},"762d":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return o}));var i=s("a27e");function a(e){return Object(i["a"])({url:"/students/",method:"POST",data:e})}function o(){return Object(i["a"])({url:"/requests/",method:"GET"})}},7698:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o}));var i=s("a27e");function a(e){return Object(i["a"])({url:"/requests/",method:"GET",params:e})}function o(e){return Object(i["a"])({url:"/requests/",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e})}},b205:function(e,t,s){},fe93:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("a",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.users.isLogued,expression:"$store.state.users.isLogued"}],staticClass:"button is-floating is-primary",on:{click:function(t){return e.show_form(!0)}}},[s("b-icon",{attrs:{size:"is-small",icon:"border-all"}})],1),s("div",{staticClass:"modal",class:{"is-active":e.$store.state.users.isComponentModalActive}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[e._m(0),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){return e.close_form()}}})]),s("section",{staticClass:"modal-card-body"},[s("section",{staticClass:"container"},[s("b-steps",{scopedSlots:e._u([{key:"navigation",fn:function(t){t.previous;var i=t.next;return[s("div",{staticClass:"buttons"},[3==e.activeStep?s("b-button",{attrs:{type:"is-primary",size:"is-medium",loading:e.isLoading,expanded:""},on:{click:e.submit}},[e._v("¡Terminar y enviar!")]):0!==e.activeStep?s("b-button",{attrs:{type:"is-primary",disabled:i.disabled,size:"is-medium",expanded:""},on:{click:function(t){return t.preventDefault(),e.nextStep()}}},[e._v("Siguiente")]):e._e()],1)]}}]),model:{value:e.activeStep,callback:function(t){e.activeStep=t},expression:"activeStep"}},[s("b-step-item",{attrs:{clickable:!1,label:"Trámite",icon:"file-document"}},[s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-vertical is-12"},[s("div",{staticClass:"tile"},[s("div",{staticClass:"tile is-parent is-vertical"},[s("article",{staticClass:"tile is-child notification is-primary dgw-option",on:{click:function(t){return e.optionSelected(1,"CONSTANCIA")}}},[s("p",{staticClass:"title is-5"},[e._v("Constancia de estudios")]),s("p",{staticClass:"subtitle is-6"},[e._v(" Requiere fotografía e INE ")])]),s("article",{staticClass:"tile is-child notification is-primary dgw-option",on:{click:function(t){return e.optionSelected(1,"HORARIO")}}},[s("p",{staticClass:"title is-5"},[e._v("Horario escolar")]),s("p",{staticClass:"subtitle is-6"},[e._v("Requiere INE")])])]),s("div",{staticClass:"tile is-parent is-vertical"},[s("article",{staticClass:"tile is-child notification is-primary dgw-option",on:{click:function(t){return e.optionSelected(1,"IMSS")}}},[s("p",{staticClass:"title is-5"},[e._v("Alta/Baja IMSS")]),s("p",{staticClass:"subtitle is-6"},[e._v("Requiere NSS, CURP e INE")])]),s("article",{staticClass:"tile is-child notification is-primary dgw-option",on:{click:function(t){return e.optionSelected(1,"SEGUIMIENTO")}}},[s("p",{staticClass:"title is-5"},[e._v("Seguimiento académico")]),s("p",{staticClass:"subtitle is-6"},[e._v(" Requiere INE ")])])])])])])]),s("b-step-item",{attrs:{clickable:!1,label:"Requisitos",icon:"file-document-edit"}},[s("OptionsDescription",{attrs:{option:e.option}}),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-12"},[s("div",[s("ValidationObserver",{ref:"form1"},["CONSTANCIA"==e.option?s("ValidationProvider",{attrs:{rules:"required",name:"description"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors,a=t.valid;return[s("b-field",{attrs:{message:i,type:{"is-danger":i[0],"is-success":a},label:"Tipo de constancia"}},[s("b-select",{attrs:{size:"is-medium-small",expanded:"",placeholder:"Selecciona un tipo de constancia"},model:{value:e.schoolRequest.description,callback:function(t){e.$set(e.schoolRequest,"description",t)},expression:"schoolRequest.description"}},[s("option",{attrs:{value:"NORMAL"}},[e._v("Normal")]),s("option",{attrs:{value:"SITUR"}},[e._v("SITUR")]),s("option",{attrs:{value:"PROMEDIO"}},[e._v("Promedio")])])],1)]}}],null,!1,617343301)}):e._e(),"IMSS"==e.option?s("ValidationProvider",{attrs:{rules:"required",name:"description"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors,a=t.valid;return[s("b-field",{attrs:{message:i,type:{"is-danger":i[0],"is-success":a},label:"Tipo de solicitud"}},[s("b-select",{attrs:{size:"is-medium-small",expanded:"",placeholder:"Seleccione una opcion"},model:{value:e.schoolRequest.description,callback:function(t){e.$set(e.schoolRequest,"description",t)},expression:"schoolRequest.description"}},[s("option",{attrs:{value:"ALTA_IMSS"}},[e._v("Alta")]),s("option",{attrs:{value:"BAJA_IMSS"}},[e._v("Baja")])])],1)]}}],null,!1,210101046)}):e._e(),"IMSS"==e.option?[s("b-field",{attrs:{label:"NSS"}},[s("BInputWithValidation",{attrs:{rules:"required",type:"text",placeholder:"NSS"},model:{value:e.student.NSS,callback:function(t){e.$set(e.student,"NSS",t)},expression:"student.NSS"}})],1),"ALTA_IMSS"==e.schoolRequest.description?s("b-field",{attrs:{label:"CURP"}},[s("BInputWithValidation",{attrs:{rules:"required",type:"text",placeholder:"CURP"},model:{value:e.student.CURP,callback:function(t){e.$set(e.student,"CURP",t)},expression:"student.CURP"}})],1):e._e(),"ALTA_IMSS"==e.schoolRequest.description?s("a",{staticClass:"is-12",attrs:{href:"https://www.gob.mx/curp/",target:"_blank"}},[e._v("Consultar CURP")]):e._e()]:e._e()],2)],1)])])],1),s("b-step-item",{attrs:{clickable:!1,label:"Datos",icon:"account"}},[s("ValidationObserver",{ref:"form2"},[s("b-field",{attrs:{label:"Nombre(s)"}},[s("BInputWithValidation",{attrs:{rules:"required",name:"name",type:"text",placeholder:"Nombre(s)"},model:{value:e.user.first_name,callback:function(t){e.$set(e.user,"first_name",t)},expression:"user.first_name"}})],1),s("b-field",{attrs:{label:"Apellidos"}},[s("BInputWithValidation",{attrs:{rules:"required",name:"lastname",type:"text",placeholder:"Apellidos"},model:{value:e.user.last_name,callback:function(t){e.$set(e.user,"last_name",t)},expression:"user.last_name"}})],1),s("b-field",{attrs:{label:"Matrícula"}},[s("BInputWithValidation",{attrs:{rules:"required|matricula",type:"text",placeholder:"Matrícula"},model:{value:e.student.enrollment,callback:function(t){e.$set(e.student,"enrollment",t)},expression:"student.enrollment"}})],1),s("b-field",{attrs:{label:"Carrera"}},[s("BSelectWithValidation",{attrs:{rules:"required",size:"is-small-medium",placeholder:"Selecciona tu carrera"},model:{value:e.student.career,callback:function(t){e.$set(e.student,"career",t)},expression:"student.career"}},e._l(e.careers,(function(t,i){return s("option",{key:i,domProps:{value:i}},[e._v(e._s(t))])})),0)],1),s("b-field",{attrs:{label:"Ingreso"}},[s("BInputWithValidation",{attrs:{rules:"required|ingreso",placeholder:"Selecciona tu ingreso",size:"is-small-medium",type:"number",min:"1",max:"12",expanded:""},model:{value:e.student.admission,callback:function(t){e.$set(e.student,"admission",t)},expression:"student.admission"}})],1)],1)],1),s("b-step-item",{attrs:{clickable:!1,label:"Archivos",icon:"cloud-upload"}},[s("b-message",{staticClass:"message",attrs:{title:"Carga de documentos",type:"is-primary","has-icon":"",size:"is-small",icon:"paperclip",closable:!1}},[s("strong",[e._v("¡IMPORTANTE!")]),e._v(" "),s("br"),e._v(" Solo se aceptan documentos en formato (.jpg, .jpeg, .png, .pdf) con un peso máximo de "),s("b",[e._v("4Mb")])]),s("ValidationObserver",{ref:"form3"},[[s("ValidationProvider",{attrs:{rules:"required",name:"description"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;t.valid;return[s("label",{staticClass:"label"},[e._v("INE")]),s("b-field",{staticClass:"file is-primary",class:{"has-name":!!e.schoolRequest.INE}},[s("b-upload",{staticClass:"file-label",attrs:{required:""},model:{value:e.schoolRequest.INE,callback:function(t){e.$set(e.schoolRequest,"INE",t)},expression:"schoolRequest.INE"}},[s("span",{staticClass:"file-cta"},[s("b-icon",{staticClass:"file-icon",attrs:{icon:"upload"}}),s("span",{staticClass:"file-label"},[e._v("Click to upload")])],1),e.schoolRequest.INE?s("span",{staticClass:"file-name"},[e._v(" "+e._s(e.schoolRequest.INE.name)+" ")]):e._e()])],1),e._v(" "+e._s(i[0])+" ")]}}])}),s("br"),"CONSTANCIA"==e.option?[s("ValidationProvider",{attrs:{rules:"required",name:"description"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;t.valid;return[s("label",{staticClass:"label"},[e._v("Foto infantil")]),s("b-field",{staticClass:"file is-primary",class:{"has-name":!!e.schoolRequest.photo}},[s("b-upload",{staticClass:"file-label",attrs:{required:""},model:{value:e.schoolRequest.photo,callback:function(t){e.$set(e.schoolRequest,"photo",t)},expression:"schoolRequest.photo"}},[s("span",{staticClass:"file-cta"},[s("b-icon",{staticClass:"file-icon",attrs:{icon:"upload"}}),s("span",{staticClass:"file-label"},[e._v("Click to upload")])],1),e.schoolRequest.photo?s("span",{staticClass:"file-name"},[e._v(" "+e._s(e.schoolRequest.photo.name)+" ")]):e._e()])],1),e._v(" "+e._s(i[0])+" ")]}}],null,!1,4056502150)})]:e._e()]],2)],1)],1)],1)])])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"modal-card-title title-size"},[s("b",[e._v("Solicitud de documentos")])])}],o=s("2f62"),l=s("762d"),n=s("7698"),r=s("2646"),c={async mounted(){this.activeStep=0},data(){return{file:null,activeStep:0,isLoading:!1,option:"",careers:r["a"]}},components:{OptionsDescription:()=>s.e("chunk-2d22578a").then(s.bind(null,"e515"))},computed:{...Object(o["b"])("users",["user","student","schoolRequest"])},methods:{show_form(e){this.$store.commit("users/SHOW_FORM",e)},optionSelected(e,t){this.activeStep=e,this.option=t,this.$store.commit("users/SET_TYPE",t)},async nextStep(){let e;switch(this.activeStep){case 1:if(e=await this.$refs.form1.validate(),!e)return;this.$refs.form1.$nextTick(()=>this.activeStep+=1);break;case 2:if(e=await this.$refs.form2.validate(),!e)return;this.$refs.form1.$nextTick(()=>this.activeStep+=1);break;default:break}},close_form(){this.$buefy.dialog.confirm({title:"¡Hey!",message:"Estás en proceso de realizar una solicitud. ¿Deseas cancelarla?",cancelText:"Continuar",confirmText:"Salir",type:"is-danger",hasIcon:!0,onConfirm:async()=>{this.$buefy.toast.open({message:"Solicitud cancelada",type:"is-danger"}),this.$store.commit("users/CLEAR_REQ"),this.show_form(!1),this.activeStep=0}})},async submit(){let e=await this.$refs.form3.validate();e&&this.$buefy.dialog.confirm({title:"¡Por último!",message:"Revisa que tus datos sean correctos.\n        Has seleccionado el trámite: "+this.option+" de tipo: "+this.$store.state.users.schoolRequest.description,cancelText:"Cancelar",confirmText:"Enviar",type:"is-info",hasIcon:!0,onConfirm:async()=>{this.isLoading=!0;try{const t=await Object(l["a"])(this.student),s=new FormData;for(var e in this.$store.commit("users/SET_STUDENT",t),this.schoolRequest)s.append(e,this.schoolRequest[e]);await Object(n["a"])(s);this.$buefy.toast.open({message:"¡Solicitud enviada correctamente!",type:"is-success"}),this.$store.commit("users/CLEAR_REQ"),this.show_form(!1),this.activeStep=0}catch(t){console.log(t)}finally{this.isLoading=!1}}})}}},u=c,d=(s("52dd"),s("2877")),p=Object(d["a"])(u,i,a,!1,null,null,null);t["default"]=p.exports}}]);