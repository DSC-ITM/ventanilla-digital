(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c0194da"],{"5a04":function(e,t,s){"use strict";var i=s("7c5d"),n=s.n(i);n.a},"7c5d":function(e,t,s){},ccde:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("a",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.users.isLogued&&!e.$store.state.users.isStaff,expression:"$store.state.users.isLogued && !$store.state.users.isStaff"}],staticClass:"button is-floating is-primary",on:{click:function(t){return e.show_form(!0)}}},[s("b-icon",{attrs:{size:"is-small",icon:"border-all"}})],1),s("div",{staticClass:"modal",class:{"is-active":e.$store.state.users.isComponentModalActive}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[e._m(0),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){return e.close_form()}}})]),s("section",{staticClass:"modal-card-body"},[s("section",{staticClass:"container"},[s("b-steps",{scopedSlots:e._u([{key:"navigation",fn:function(t){t.previous;var i=t.next;return[s("div",{staticClass:"buttons"},[3===e.activeStep?s("b-button",{attrs:{type:"is-primary",size:"is-medium",loading:e.isLoading,expanded:""},on:{click:e.submit}},[e._v("¡Terminar y enviar!")]):0!==e.activeStep?s("b-button",{attrs:{type:"is-primary",disabled:i.disabled,size:"is-medium",expanded:""},on:{click:function(t){return t.preventDefault(),e.nextStep()}}},[e._v("Siguiente")]):e._e()],1)]}}]),model:{value:e.activeStep,callback:function(t){e.activeStep=t},expression:"activeStep"}},[s("b-step-item",{attrs:{clickable:!1,label:"Trámite",icon:"file-document"}},[s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-vertical is-12"},[s("div",{staticClass:"tile"},[s("div",{staticClass:"tile is-parent is-vertical"},[s("article",{staticClass:"tile is-child notification is-primary dgw-option",on:{click:function(t){return e.optionSelected(1,"CONSTANCIA")}}},[s("p",{staticClass:"title is-5"},[e._v("Constancia de estudios")]),s("p",{staticClass:"subtitle is-6"},[e._v(" Requiere fotografía e INE ")])]),s("article",{staticClass:"tile is-child notification is-primary dgw-option",on:{click:function(t){return e.optionSelected(1,"HORARIO")}}},[s("p",{staticClass:"title is-5"},[e._v("Horario escolar")]),s("p",{staticClass:"subtitle is-6"},[e._v("Requiere INE")])])]),s("div",{staticClass:"tile is-parent is-vertical"},[s("article",{staticClass:"tile is-child notification is-primary dgw-option",on:{click:function(t){return e.optionSelected(1,"IMSS")}}},[s("p",{staticClass:"title is-5"},[e._v("Alta/Baja IMSS")]),s("p",{staticClass:"subtitle is-6"},[e._v("Requiere NSS, CURP e INE")])]),s("article",{staticClass:"tile is-child notification is-primary dgw-option",on:{click:function(t){return e.optionSelected(1,"SEGUIMIENTO")}}},[s("p",{staticClass:"title is-5"},[e._v(" Seguimiento académico (Kardex) ")]),s("p",{staticClass:"subtitle is-6"},[e._v(" Requiere INE ")])])])])])])]),s("b-step-item",{attrs:{clickable:!1,label:"Requisitos",icon:"file-document-edit"}},[s("OptionsDescription",{attrs:{option:e.option}}),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-12"},[s("div",[s("RequestForm",{ref:"step1",attrs:{option:e.option,student:e.studentForm,schoolRequest:e.schoolRequest,request:e.request}})],1)])])],1),s("b-step-item",{attrs:{clickable:!1,label:"Datos",icon:"account"}},[s("StudentDataForm",{ref:"step2",attrs:{user:e.user,student:e.studentForm,careers:e.careers}})],1),s("b-step-item",{attrs:{clickable:!1,label:"Archivos",icon:"cloud-upload"}},[s("b-message",{staticClass:"message",attrs:{title:"Carga de documentos",type:"is-primary","has-icon":"",size:"is-small",icon:"paperclip",closable:!1}},[s("strong",[e._v("¡IMPORTANTE!")]),e._v(" "),s("br"),e._v(" Solo se aceptan documentos en formato (.jpg, .jpeg, .png, .pdf) con un peso máximo de "),s("b",[e._v("4Mb")]),e._v(". "),s("br"),e._v(" Si cuenta con un documento anterior puede usar ese mismo, no es necesario hacer nada en ese caso. "),s("br"),e._v(" Los únicos documentos que no se guardan son el INE y la foto infantil. ")]),s("IdImagesForm",{ref:"step3",attrs:{option:e.option,schoolRequest:e.schoolRequest,student:e.studentForm,files:e.files}})],1)],1)],1)])])])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"modal-card-title title-size"},[s("b",[e._v("Solicitud de documentos")])])}],r=(s("a4d3"),s("e01a"),s("d3b7"),s("5530")),a=(s("96cf"),s("1da1")),o=s("2f62"),c=(s("762d"),s("7698")),u=s("2646"),l={mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("students/BASIC",{key:"studentForm",value:e.user.student||{}}),e.activeStep=0;case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{file:null,activeStep:0,isLoading:!1,option:"",careers:u["a"],request:{otherDescription:"",vacation:!1},files:{CURP_file:null,NSS_file:null}}},components:{OptionsDescription:function(){return s.e("chunk-2d0c0a24").then(s.bind(null,"432a"))},RequestForm:function(){return s.e("chunk-2d0bfed5").then(s.bind(null,"4036"))},StudentDataForm:function(){return s.e("chunk-2d21f49d").then(s.bind(null,"d8d7"))},IdImagesForm:function(){return s.e("chunk-44434d8a").then(s.bind(null,"bd53"))}},computed:Object(r["a"])(Object(r["a"])({},Object(o["b"])("users",["user","schoolRequest"])),Object(o["b"])("students",["studentForm"])),methods:{show_form:function(e){this.$store.commit("users/SHOW_FORM",e)},optionSelected:function(e,t){this.activeStep=e,this.option=t,this.$store.commit("users/SET_TYPE",t)},nextStep:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.activeStep,t.next=1===t.t0?3:2===t.t0?10:17;break;case 3:return t.next=5,e.$refs.step1.$refs.form1.validate();case 5:if(s=t.sent,s){t.next=8;break}return t.abrupt("return");case 8:return e.$refs.step1.$refs.form1.$nextTick((function(){return e.activeStep+=1})),t.abrupt("break",18);case 10:return t.next=12,e.$refs.step2.$refs.form2.validate();case 12:if(s=t.sent,s){t.next=15;break}return t.abrupt("return");case 15:return e.$refs.step1.$refs.form1.$nextTick((function(){return e.activeStep+=1})),t.abrupt("break",18);case 17:return t.abrupt("break",18);case 18:case"end":return t.stop()}}),t)})))()},close_form:function(){var e=this;0!=this.activeStep?this.$buefy.dialog.confirm({title:"¡Hey!",message:"Estás en proceso de realizar una solicitud. ¿Deseas cancelarla?",cancelText:"Continuar",confirmText:"Salir",type:"is-danger",hasIcon:!0,onConfirm:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$buefy.toast.open({message:"Solicitud cancelada",type:"is-danger"}),e.request.otherDescription="",e.request.vacation=!1,e.$store.commit("users/CLEAR_REQ"),e.show_form(!1),e.activeStep=0;case 6:case"end":return t.stop()}}),t)})));function s(){return t.apply(this,arguments)}return s}()}):this.close_form_direc()},close_form_direc:function(){this.request.otherDescription="",this.request.vacation=!1,this.$store.commit("users/CLEAR_REQ"),this.show_form(!1),this.activeStep=0},submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.step3.$refs.form3.validate();case 2:if(s=t.sent,s){t.next=5;break}return t.abrupt("return");case 5:i="",e.schoolRequest.description?("OTRO"===e.schoolRequest.description&&(e.schoolRequest.description=e.request.otherDescription.toUpperCase(),e.request.otherDescription=""),e.request.vacation&&(e.schoolRequest.description+=" CON PERÍODO VACACIONAL",e.request.vacation=!1),e.studentForm.CURP&&(e.studentForm.CURP=e.studentForm.CURP.toUpperCase()),e.studentForm.enrollment=e.studentForm.enrollment.toUpperCase(),i="Revisa que tus datos sean correctos.\n        Has seleccionado el trámite: "+e.option+" de tipo: "+e.schoolRequest.description):i="Revisa que tus datos sean correctos.\n        Has seleccionado el trámite: "+e.option,e.$buefy.dialog.confirm({title:"¡Por último!",message:i,cancelText:"Cancelar",confirmText:"Enviar",type:"is-info",hasIcon:!0,onConfirm:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var s,i,n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,s=e.studentForm,i=e.files,t.next=6,e.$store.dispatch("students/update",{studentForm:s,files:i});case 6:for(r in e.$store.commit("users/SET_STUDENT",e.studentForm),n=new FormData,e.schoolRequest)n.append(r,e.schoolRequest[r]);return t.next=11,Object(c["a"])(n);case 11:a=t.sent,console.log(a),e.$buefy.toast.open({message:"¡Solicitud enviada correctamente!",type:"is-success"}),e.$store.commit("users/CLEAR_REQ"),e.show_form(!1),e.activeStep=0,t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](1),console.log(t.t0),e.$dw.messages.alertErrorDialog({title:"Trámite pendiente: "+e.schoolRequest.type,message:"No es posible tramitar dicho documento mientras tengas una solicitud del mismo pendiente"}).then((function(){e.close_form_direc()}));case 23:return t.prev=23,e.isLoading=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[1,19,23,26]])})));function s(){return t.apply(this,arguments)}return s}()});case 8:case"end":return t.stop()}}),t)})))()}}},d=l,p=(s("5a04"),s("2877")),m=Object(p["a"])(d,i,n,!1,null,null,null);t["default"]=m.exports}}]);