(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dbf7a846"],{"6bd0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("hero-bar",[t._v(" Proceso de Titulación "),i("router-link",{staticClass:"button is-light",attrs:{slot:"right",to:"/profile"},slot:"right"},[i("b-icon",{attrs:{icon:"account","custom-size":"default"}}),i("span",[t._v("Perfil")])],1)],1),i("notification",{staticClass:"has-text-centered is-primary"},[i("div",{staticClass:"has-text-centered"},[i("b-icon",{attrs:{"custom-size":"default"}}),i("b",[t._v(" Lee bien cada plan para saber todos los documentos que necesitas para iniciar tu tramite de titulación. ")])],1)]),t.isLoading?i("section",{staticClass:"section"},[i("skeletonProceso")],1):i("section",{staticClass:"section is-main-section"},[i("b-steps",{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[i("b-step-item",{attrs:{label:"Documentación",icon:"file-multiple"}},[i("b-table",{attrs:{"show-detail-icon":"",detailed:"",narrowed:"",striped:"",data:t.tramite},scopedSlots:t._u([{key:"detail",fn:function(e){return[t.showFile(e.row.uploads)&&"RECHAZADO"===t.showStatus(e.row.uploads)?i("div",[i("div",[i("b",[t._v(" Comentarios ")]),i("br"),i("div",[t._v(" "+t._s(e.row.uploads[0].comment)+" ")])])]):i("div")]}}])},[i("b-table-column",{attrs:{field:"name",label:"Documento"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("strong",[t._v(t._s(e.row.name||t.documents)+" ")]),i("b-tag",[t._v(t._s(e.row.type))])]}}])}),i("b-table-column",{attrs:{field:"status",label:"Estatus"},scopedSlots:t._u([{key:"default",fn:function(e){return["ENVIADO"===t.showStatus(e.row.uploads)&&t.showFile(e.row.uploads)?i("div",[i("b-icon",{attrs:{title:"Pendiente",size:"is-small",type:"is-warning",icon:"alert"}}),t._v(" Pendiente ")],1):"ACEPTADO"===t.showStatus(e.row.uploads)?i("div",[i("b-icon",{attrs:{title:"Aceptado",size:"is-small",type:"is-success",icon:"check-circle"}}),t._v(" Aceptado ")],1):"RECHAZADO"===t.showStatus(e.row.uploads)?i("div",[i("b-icon",{attrs:{title:"Rechazado",size:"is-small",type:"is-danger",icon:"close-circle"}}),t._v(" Rechazado ")],1):i("div",[i("b-icon",{attrs:{title:"Sin enviar",size:"is-small",type:"is-info",icon:"alert-circle"}}),t._v(" Sin enviar ")],1)]}}])}),i("b-table-column",{attrs:{field:"name",label:"Fecha de envío"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.showFile(e.row.uploads)?i("div",[t._v(" "+t._s(new Date(e.row.uploads[0].updated_at).toLocaleString("es-MX",{hour12:!0}))+" ")]):i("div")]}}])}),i("b-table-column",{attrs:{field:"name",label:"Acciones"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"buttons"},[t.showFile(e.row.uploads)&&"RECHAZADO"===t.showStatus(e.row.uploads)?i("button",{staticClass:"button is-primary",attrs:{type:"button"},on:{click:function(i){t.updateActive=!0,t.document=e.row}}},[i("b-tooltip",{attrs:{type:"is-dark",label:"Editar archivo",position:"is-top"}},[i("b-icon",{attrs:{icon:"file-document-edit-outline",size:"is-small"}})],1)],1):t.showFile(e.row.uploads)?i("a",{staticClass:"button is-link",attrs:{type:"button",href:e.row.uploads[0].file,target:"_blank"}},[i("b-tooltip",{attrs:{type:"is-dark",label:"Visualizar archivo",position:"is-top"}},[i("b-icon",{attrs:{icon:"file-document-outline",size:"is-small"}})],1)],1):i("button",{staticClass:"button is-info",attrs:{type:"button"},on:{click:function(i){t.updateActive=!0,t.document=e.row}}},[i("b-tooltip",{attrs:{type:"is-dark",label:"Subir archivo",position:"is-top"}},[i("b-icon",{attrs:{icon:"upload",size:"is-small"}})],1)],1)])]}}])})],1)],1),i("actions",{attrs:{isActive:t.updateActive,document:t.document},on:{cancel:function(e){t.updateActive=!1},send:t.sendFile}}),i("b-step-item",{attrs:{label:"Titulación",icon:"school-outline"}},[i("br"),i("div",{staticClass:"columns  is-flex is-justify-content-center mb-6"},[i("h2",{staticClass:"title is-4",attrs:{align:"center"}},[t._v(" En este apartado podras visualizar los documentos de respuesta con respecto a tu tramite de titulación. ")])])])],1)],1)],1)},s=[],n=(i("4de4"),i("d3b7"),i("ddb0"),i("5530")),o=(i("96cf"),i("1da1")),l=i("2f62"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("div",{staticClass:"container"},[i("b-modal",{attrs:{active:t.isCardModalActive,width:640,scroll:"keep"},on:{"update:active":function(e){t.isCardModalActive=e}}},[i("ValidationObserver",{ref:"form"},[i("div",{staticClass:"modal-card"},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[t._v("Subir "),i("b",[t._v(t._s(t.document&&t.document.name?t.document.name:""))])]),i("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.cancel}})]),i("section",{staticClass:"modal-card-body"},[i("ValidationProvider",{attrs:{rules:"required",name:"description"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("form",{attrs:{action:""}},[i("b-message",{staticClass:"message",attrs:{title:"IMPORTANTE",type:"is-primary","has-icon":"",size:"is-small",closable:!1}},[i("div",[t._v(" En esta sección podrás subir los documentos correspondientes a tu solicitud de titulación, simplemente arrastra el archivo que deseas subir o da click para seleccionarlo, luego simplemente da clic en subir, espera la confirmación y ¡Listo! ")])]),i("BUploadWithValidation",{attrs:{rules:t.validateFile(),type:"file",message:t.file&&t.file.name?"Selecciona el archivo que deseas subir":"Selecciona el tipo de archivo que deseas subir",dragDrop:""},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),i("div",{staticClass:"tags"},t._l(t.dropFiles,(function(e,a){return i("span",{key:a,staticClass:"tag is-primary"},[t._v(" "+t._s(e&&e.name?e.name:"")+" "),i("button",{staticClass:"delete is-small",attrs:{type:"button"},on:{click:function(e){return t.deleteDropFile(a)}}})])})),0)],1),t._v(" "+t._s(a[0])+" ")]}}])})],1),i("footer",{staticClass:"modal-card-foot"},[i("button",{staticClass:"button is-primary ",on:{click:function(e){return t.submit()}}},[t._v(" Subir ")]),i("button",{staticClass:"button",on:{click:t.cancel}},[t._v("Cancelar")])])])])],1)],1)])},c=[],u=(i("a434"),i("b0c0"),{props:{isActive:{type:Boolean,default:!1},document:{type:Object}},data:function(){return{isCardModalActive:!1,file:{},dropFiles:[]}},methods:{cancel:function(){this.$emit("cancel"),this.file={}},deleteDropFile:function(t){this.dropFiles.splice(t,1)},validateFile:function(){return"IMAGE"==this.document.type?"required|img|size:4000":"required|pdf|size:4000"},submit:function(){console.log(this.document);var t={tag:this.document.name,file:this.file};this.document.uploads[0]&&this.document.uploads[0].uuid&&(t.uuid=this.document.uploads[0].uuid),this.$emit("send",t)}},watch:{isActive:function(t){this.isCardModalActive=t},isCardModalActive:function(t){t||this.cancel()}}}),d=u,p=i("2877"),m=Object(p["a"])(d,r,c,!1,null,null,null),f=m.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("div",{staticClass:"content"},[i("p",[i("b-skeleton",{attrs:{height:"150px"}})],1)]),t._l(t.media,(function(t){return i("article",{key:t,staticClass:"media"},[i("div",{staticClass:"media-content"},[i("div",{staticClass:"content"},[i("p",[i("b-skeleton",{attrs:{height:"30px"}})],1)])])])}))],2)},v=[],h={data:function(){return{media:10}}},g=h,w=Object(p["a"])(g,b,v,!1,null,null,null),C=w.exports,_={name:"Titulation",props:{uuid:{default:null}},components:{Actions:f,skeletonProceso:C},data:function(){return{tramite:{},updateActive:!1,isLoading:!1,document:null,showDetailIcon:!1,showSteps:!1,step:0,isOpen:null,plans:[],actualCard:null,option:null,planSelected:{}}},methods:{showFile:function(t){var e=t.filter((function(t){return t.file}));return e.length},showComment:function(t){var e=t.filter((function(t){return t.comment}));return e.length},showStatus:function(t){var e=t.filter((function(t){return t.status}));return e.length?1===t[0].status?"RECHAZADO":2===t[0].status?"ACEPTADO":void 0:"ENVIADO"},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,t.tramite=[],e.next=5,t.$store.dispatch("titulation/getTramiteinfo",t.uuid);case 5:i=e.sent,t.tramite=i.plan.documents,t.isLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),t.isLoading=!1;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},sendFile:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,s,n,o,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.isLoading=!0,i.prev=1,a=!1,t.uuid&&(a=!0),s=new FormData,n=t,i.t0=regeneratorRuntime.keys(n);case 7:if((i.t1=i.t0()).done){i.next=13;break}return o=i.t1.value,i.next=11,s.append(o,n[o]);case 11:i.next=7;break;case 13:return i.next=15,e.$store.dispatch("uploads/upload",{form_data:s,uuid:a});case 15:l=i.sent,console.log(l),e.updateActive=!1,e.getData(),e.$buefy.snackbar.open({message:"Subida exitosa",queue:!1}),i.next=26;break;case 22:i.prev=22,i.t2=i["catch"](1),console.log(i.t2),e.$buefy.toast.open({message:"Algo salió mal",type:"is-warning"});case 26:case"end":return i.stop()}}),i,null,[[1,22]])})))()}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(l["b"])(["userName","userEmail"])),Object(l["b"])("users",["user"])),Object(l["b"])("students",["studentForm"])),created:function(){this.getData()}},y=_,k=(i("8394"),Object(p["a"])(y,a,s,!1,null,null,null));e["default"]=k.exports},8394:function(t,e,i){"use strict";var a=i("f1d2"),s=i.n(a);s.a},a434:function(t,e,i){"use strict";var a=i("23e7"),s=i("23cb"),n=i("a691"),o=i("50c4"),l=i("7b0b"),r=i("65f0"),c=i("8418"),u=i("1dde"),d=i("ae40"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,b=Math.min,v=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var i,a,u,d,p,m,g=l(this),w=o(g.length),C=s(t,w),_=arguments.length;if(0===_?i=a=0:1===_?(i=0,a=w-C):(i=_-2,a=b(f(n(e),0),w-C)),w+i-a>v)throw TypeError(h);for(u=r(g,a),d=0;d<a;d++)p=C+d,p in g&&c(u,d,g[p]);if(u.length=a,i<a){for(d=C;d<w-a;d++)p=d+a,m=d+i,p in g?g[m]=g[p]:delete g[m];for(d=w;d>w-a+i;d--)delete g[d-1]}else if(i>a)for(d=w-a;d>C;d--)p=d+a-1,m=d+i-1,p in g?g[m]=g[p]:delete g[m];for(d=0;d<i;d++)g[d+C]=arguments[d+2];return g.length=w-a+i,u}})},b0c0:function(t,e,i){var a=i("83ab"),s=i("9bf2").f,n=Function.prototype,o=n.toString,l=/^\s*function ([^ (]*)/,r="name";a&&!(r in n)&&s(n,r,{configurable:!0,get:function(){try{return o.call(this).match(l)[1]}catch(t){return""}}})},f1d2:function(t,e,i){}}]);