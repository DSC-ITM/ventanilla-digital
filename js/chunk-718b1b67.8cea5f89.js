(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-718b1b67"],{"02fe":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"container"},[a("b-modal",{attrs:{width:640,scroll:"keep"},model:{value:e.isCardModalActive,callback:function(t){e.isCardModalActive=t},expression:"isCardModalActive"}},[a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[e._v(e._s(e.label))]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){return e.toggleModal()}}})]),a("section",{staticClass:"modal-card-body"},["PDF"==e.ext?a("embed",{attrs:{type:"application/pdf",src:e.url,width:"100%",height:"700"}}):a("b-image",{attrs:{src:e.url,alt:"A random image"}})],1),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button is-primary",on:{click:function(t){return e.toggleModal()}}},[e._v(" Cerrar ")])])])])],1)])},i=[],l={name:"DocumentPreview",props:{url:{type:String,default:""},label:{type:String,default:"Visualización de archivo"}},data(){return{isCardModalActive:!1,ext:""}},methods:{toggleModal(){this.getExt(this.url),this.isCardModalActive=!this.isCardModalActive},toggleModalRefresh(e){this.getExt(e),this.isCardModalActive=!this.isCardModalActive},getExt(e){const t=e.split(".").pop(),a=t.split("?")[0];this.ext=a}}},r=l,o=a("2877"),n=Object(o["a"])(r,s,i,!1,null,null,null);t["a"]=n.exports},"09f4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal"),a("hero-bar",[e._v(" Editar perfil "),a("router-link",{staticClass:"button is-light",attrs:{slot:"right",to:"/profile"},slot:"right"},[a("b-icon",{attrs:{icon:"account","custom-size":"default"}}),a("span",[e._v("Perfil")])],1)],1),a("notification",{staticClass:"is-primary"},[a("div",[a("b-icon",{attrs:{icon:"account-alert","custom-size":"default"}}),e._v(" Aquí podrás ver y editar tu información de tu cuenta. "),a("b",[e._v("Verifica que tus datos sean correctos y no olvides dar click en guardar.")])],1)]),a("section",{staticClass:"section is-main-section"},[a("tiles",[a("div",{staticClass:"tile is-child"},[a("profile-update-form",{attrs:{user:e.user}})],1),a("div",{staticClass:"tile is-child"},[a("student-update-form",{attrs:{student:e.studentForm}}),a("uploads-update-form")],1)]),a("password-update-form",{staticClass:"tile is-child"})],1)],1)},i=[],l=a("2f62"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card-component",{attrs:{title:"Datos personales",icon:"account-circle"}},[a("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit;return[a("AvatarSelector",{ref:"avatarS",attrs:{user:e.user,form:e.defaultForm}}),a("div",{staticClass:"columns vertical-center"},[a("div",{staticClass:"is-user-avatar change column",on:{click:function(t){return e.$refs.avatarS.toggleModal()}}},[a("img",{staticClass:"changeimg",attrs:{src:e.defaultForm.avatar?e.defaultForm.avatar:"https://avatars.dicebear.com/api/initials/"+e.initials()+".svg?b=%23800000",width:"140px"}}),a("b-icon",{staticClass:"bc",attrs:{icon:"circle-edit-outline",size:"is-large",type:"is-light"}})],1),a("b-field",{staticClass:"column is-9 is-hidden-mobile",attrs:{label:"Correo"}},[a("template",{slot:"message"},[e._v(" Para cambiar tu correo electrónico utiliza este "),a("router-link",{attrs:{tag:"a",to:"/"}},[e._v("formulario")]),e._v(". ")],1),a("b-input",{attrs:{icon:"email",value:e.user.email,readonly:"",disabled:""}})],2)],1),a("div",{staticClass:"columns"},[a("b-field",{staticClass:"column is-hidden-desktop",attrs:{"label-position":"on-border",label:"Correo"}},[a("template",{slot:"message"},[e._v(" Para cambiar tu correo electrónico utiliza este "),a("router-link",{attrs:{tag:"a",to:"/"}},[e._v("formulario")]),e._v(". ")],1),a("b-input",{attrs:{size:"is-small",icon:"email",value:e.user.email,readonly:"",disabled:""}})],2),a("BInputWithValidation",{staticClass:"column",attrs:{"label-position":"on-border",label:"Nombre(s)",rules:"required",type:"text",placeholder:"Nombre(s)"},model:{value:e.defaultForm.full_name,callback:function(t){e.$set(e.defaultForm,"full_name",t)},expression:"defaultForm.full_name"}})],1),a("div",{staticClass:"columns"},[a("BInputWithValidation",{staticClass:"column",attrs:{"label-position":"on-border",rules:"required",type:"text",label:"Primer apellido",placeholder:"Primer apellido"},model:{value:e.defaultForm.first_lastname,callback:function(t){e.$set(e.defaultForm,"first_lastname",t)},expression:"defaultForm.first_lastname"}}),a("BInputWithValidation",{staticClass:"column",attrs:{"label-position":"on-border",label:"Segundo apellido",rules:"required",type:"text",placeholder:"Segundo apellido"},model:{value:e.defaultForm.second_lastname,callback:function(t){e.$set(e.defaultForm,"second_lastname",t)},expression:"defaultForm.second_lastname"}})],1),a("div",{staticClass:"columns"},[a("BInputWithValidation",{staticClass:"column",attrs:{"label-position":"on-border",rules:"required|length:10",label:"Teléfono",type:"text",placeholder:"9999999999",message:"Teléfono celular a 10 digitos"},model:{value:e.defaultForm.phone,callback:function(t){e.$set(e.defaultForm,"phone",t)},expression:"defaultForm.phone"}}),a("ValidationProvider",{staticClass:"column",attrs:{rules:"required",name:"'birthday'"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors,i=t.valid;return[a("b-field",{attrs:{label:"Fecha de nacimiento",type:{"is-danger":s[0],"is-success":i},message:s,"label-position":"on-border"}},[a("b-datepicker",{attrs:{placeholder:"Click para selccionar...",icon:"calendar-today","trap-focus":"","append-to-body":""},model:{value:e.defaultForm.birthday,callback:function(t){e.$set(e.defaultForm,"birthday",t)},expression:"defaultForm.birthday"}})],1)]}}],null,!0)})],1),a("div",{staticClass:"columns"},[a("BSelectWithValidation",{staticClass:"column",attrs:{rules:"required","label-position":"on-border",placeholder:"Selecciona tu género",label:"Género"},model:{value:e.defaultForm.gender,callback:function(t){e.$set(e.defaultForm,"gender",t)},expression:"defaultForm.gender"}},e._l(e.genders,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0),a("BSelectWithValidation",{staticClass:"column",attrs:{rules:"required","label-position":"on-border",placeholder:"Selecciona tu estado civil",label:"Estado civil"},model:{value:e.defaultForm.marital_status,callback:function(t){e.$set(e.defaultForm,"marital_status",t)},expression:"defaultForm.marital_status"}},e._l(e.marital_status,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)],1),a("div",{staticClass:"columns"},[a("BInputWithValidation",{staticClass:"column",attrs:{rules:"required","label-position":"on-border",label:"Dirección",type:"text",placeholder:"Calle 1 #111 x2 y 4 Fracc. X",message:"La residencia donde vives actualmente"},model:{value:e.defaultForm.address,callback:function(t){e.$set(e.defaultForm,"address",t)},expression:"defaultForm.address"}})],1),a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("BInputWithValidation",{attrs:{"label-position":"on-border",rules:"alpha_num|length:18",label:"CURP",name:"'CURP'",type:"text",placeholder:"CURP"},model:{value:e.defaultForm.CURP,callback:function(t){e.$set(e.defaultForm,"CURP",t)},expression:"defaultForm.CURP"}}),a("a",{staticClass:"tag",attrs:{href:"https://www.gob.mx/curp/",target:"_blank"}},[e._v("Consulta tu CURP")])],1),a("div",{staticClass:"column"},[a("BInputWithValidation",{attrs:{"label-position":"on-border",rules:"numeric|length:11",label:"NSS",type:"text",name:"'NSS'",placeholder:"NSS"},model:{value:e.defaultForm.NSS,callback:function(t){e.$set(e.defaultForm,"NSS",t)},expression:"defaultForm.NSS"}}),a("a",{staticClass:"tag",attrs:{href:"https://serviciosdigitales.imss.gob.mx/gestionAsegurados-web-externo/asignacionNSS",target:"_blank"}},[e._v("Consulta tu NSS")])],1)]),a("hr"),a("b-field",{attrs:{addons:!1}},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":e.isLoading},attrs:{type:"is-primary"},on:{click:function(t){return t.preventDefault(),s(e.submit)}}},[e._v(" Guardar ")])])])]}}])})],1)},o=[];const n={M:"Masculino",F:"Femenino",NE:"Prefiero no decirlo"},d={M:"Casado",S:"Soltero"};var u={name:"ProfileUpdateForm",components:{AvatarSelector:()=>a.e("chunk-3e33b2ca").then(a.bind(null,"f6e5"))},props:{user:{type:Object,default:null}},data(){return{genders:n,marital_status:d,isFileUploaded:!1,isLoading:!1,defaultForm:{email:this.user.email,full_name:this.user.full_name,first_lastname:this.user.first_lastname,second_lastname:this.user.second_lastname,CURP:this.user.CURP,NSS:this.user.NSS,birthday:this.user.birthday?new Date(this.user.birthday):null,age:this.user.age,occupation:this.user.occupation,phone:this.user.phone,gender:this.user.gender,address:this.user.address,marital_status:this.user.marital_status,avatar:this.user.avatar}}},computed:{...Object(l["b"])(["userName","userLastName","userEmail"])},methods:{async submit(){this.isLoading=!0;try{if(this.defaultForm.birthday){var e=new Date(this.defaultForm.birthday),t=new Date,a=t-e,s=a/31536e6,i=Math.trunc(s);this.defaultForm.age=i}console.log(this.defaultForm);var l=this.defaultForm;await this.$store.dispatch("users/update",{user:l}),this.$buefy.snackbar.open({message:"Cambios guardados",queue:!1})}catch(r){console.log(r)}finally{this.isLoading=!1}},initials(){const e=this.user.full_name.charAt(0),t=this.user.first_lastname.charAt(0);return e+t},uploadFile(e){console.log(e);const t=new FormData;for(var a in e)t.append(a,e[a]);const s=!1;this.$store.dispatch("uploads/upload",{form_data:t,uuid:s})}},watch:{userEmail(e){this.form.email=e}}},c=u,m=(a("cca2"),a("2877")),p=Object(m["a"])(c,r,o,!1,null,"4e32904f",null),f=p.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card-component",{attrs:{title:"Archivos personales",icon:"upload"}},[a("div",{staticClass:"tags"},e._l(e.uploads,(function(t,s){return a("b-tag",{key:s,attrs:{type:"is-primary",closable:"","aria-close-label":"Close tag"},on:{close:function(a){return e.deleteFile(t)}}},[a("b-tooltip",{attrs:{label:"Ver "+(t.name||"documento"),position:"is-top",type:"is-dark"}},[a("a",{on:{click:function(t){return e.$refs.RequestPreview[s].toggleModal()}}},[e._v(" "+e._s(t.document||"Ver documento")+" ")])]),a("request-document-preview",{ref:"RequestPreview",refInFor:!0,attrs:{url:t.file,label:t.document}})],1)})),1),a("b-field",[a("b-dropdown",{attrs:{"aria-role":"list",expanded:""},scopedSlots:e._u([{key:"trigger",fn:function(){return[a("b-button",{staticClass:"has-text-light",attrs:{label:e.document.name||"Tipo de archivo",type:"is-primary","icon-right":"menu-down",expanded:""}})]},proxy:!0}]),model:{value:e.document,callback:function(t){e.document=t},expression:"document"}},e._l(e.documents,(function(t){return a("b-dropdown-item",{key:t.name,attrs:{disabled:e.document==t,"aria-role":"listitem"},on:{click:function(a){e.document=t}}},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-content"},[a("p",{staticClass:"subtitle is-6 has-text-dark"},[e._v(" "+e._s(t.name)+" "),a("b-tag",{attrs:{type:"PDF"==t.type?"is-danger":"is-info"}},[e._v(e._s("PDF"==t.type?".pdf":".jpg / .jpeg / .png"))])],1)])])])})),1)],1),a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit;return[a("BUploadWithValidation",{attrs:{rules:e.getRules(),type:"file",disabled:!e.document.name,message:e.document.name?"Selecciona el archivo que deseas subir":"Selecciona el tipo de archivo que deseas subir",dragDrop:""},model:{value:e.upload.file,callback:function(t){e.$set(e.upload,"file",t)},expression:"upload.file"}}),a("hr"),a("b-field",{attrs:{addons:!1}},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":e.isLoading},on:{click:function(t){return t.preventDefault(),s(e.submit)}}},[e._v(" Subir ")])])])]}}])})],1)},b=[],v=a("02fe"),g={name:"UploadsUpdateForm",components:{RequestDocumentPreview:v["a"]},data(){return{isFileUploaded:!1,isLoading:!1,document:{},documents:{},upload:{},uploads:[]}},created(){this.getFiles()},methods:{async getFiles(){const e=await this.$store.dispatch("uploads/getDocuments"),t=await this.$store.dispatch("uploads/getList");this.documents=e,this.uploads=t},async deleteFile(e){console.log(e),this.$buefy.dialog.confirm({title:"¡Cuidado! Lee detenidamente",message:"Estás apunto de eliminar tu "+e.document+". ¿Estás seguro? Esta acción no se puede deshacer.",cancelText:"Cancelar",confirmText:"Eliminar",type:"is-danger",hasIcon:!0,onConfirm:async()=>{try{await this.$store.dispatch("uploads/deleteUpload",e.uuid),this.$buefy.toast.open({message:"Archivo eliminado",type:"is-danger"})}catch(t){this.$buefy.toast.open({message:"Algo salió mal",type:"is-warning"})}}})},async submit(){this.isLoading=!0;try{let t=!1;const a=this.upload.file;let s=JSON.parse(JSON.stringify(this.upload));for(const e in this.uploads)this.uploads[e].document===this.document.name&&(s=this.uploads[e],t=!0);s.tag=this.document.name,s.file=a;const i=new FormData,l=s;for(var e in l)await i.append(e,l[e]);await this.$store.dispatch("uploads/upload",{form_data:i,uuid:t}),this.getFiles(),this.upload={},this.$refs.form.reset(),this.$buefy.snackbar.open({message:"Subida exitosa",queue:!1})}catch(t){console.log(t),this.$buefy.toast.open({message:"Algo salió mal",type:"is-warning"})}finally{this.isLoading=!1}},getRules(){return"IMAGE"==this.document.type?"required|img|size:4000":"required|pdf|size:4000"}}},C=g,y=(a("4daf"),Object(m["a"])(C,h,b,!1,null,"2ab1f2e5",null)),F=y.exports,_=a("0ceb"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card-component",{attrs:{title:"Cambiar contraseña",icon:"lock"}},[a("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit;return[a("form",[a("b-field",{attrs:{horizontal:"",label:"Contraseña actual"}},[a("BInputWithValidation",{attrs:{rules:"required",type:"password",placeholder:"Contraseña actual","password-reveal":""},model:{value:e.user.old_password,callback:function(t){e.$set(e.user,"old_password",t)},expression:"user.old_password"}})],1),a("hr"),a("b-field",{attrs:{horizontal:"",label:"Contraseña nueva"}},[a("BInputWithValidation",{attrs:{rules:"required|password","data-vv-as":"field",name:"'Contraseña'",type:"password",placeholder:"Contraseña nueva","password-reveal":"",vid:"new_password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),a("b-field",{attrs:{horizontal:"",label:"Confirmar contraseña"}},[a("BInputWithValidation",{attrs:{rules:"required|confirmed:new_password",name:"Password",type:"password",placeholder:"Confirmar contraseña","password-reveal":""},model:{value:e.user.password_confirm,callback:function(t){e.$set(e.user,"password_confirm",t)},expression:"user.password_confirm"}})],1),a("hr"),a("b-field",{attrs:{horizontal:""}},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":e.isLoading},attrs:{type:"submit"},on:{click:function(t){t.preventDefault(),e.submit,s(e.submit)}}},[e._v(" Guardar ")])])])],1)]}}])})],1)},S=[],k=a("2612"),x={name:"PasswordUpdateForm",data(){return{isLoading:!1,user:{old_password:"",password:"",password_confirm:""}}},methods:{async submit(){this.isLoading=!0;try{await Object(k["b"])(this.user);this.$buefy.snackbar.open({message:"Cambios guardados",queue:!1})}catch(e){console.log(e),e.old_password&&this.$dw.messages.errorSnackbar("La contraseña actual no es correcta")}finally{this.isLoading=!1}}}},$=x,P=Object(m["a"])($,w,S,!1,null,null,null),q=P.exports,U=a("2646"),V={name:"Profile",data(){return{careers:U["a"]}},components:{Modal:()=>a.e("chunk-5ee707d5").then(a.bind(null,"ccde")),PasswordUpdateForm:q,ProfileUpdateForm:f,StudentUpdateForm:_["a"],RequestDocumentPreview:v["a"],UploadsUpdateForm:F},computed:{...Object(l["b"])(["userName","userEmail"]),...Object(l["b"])("users",["user"]),...Object(l["b"])("students",["studentForm"])}},E=V,L=Object(m["a"])(E,s,i,!1,null,null,null);t["default"]=L.exports},"0ceb":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card-component",{attrs:{title:"Datos de estudiante",icon:"school"}},[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit;return[a("div",{staticClass:"columns"},[a("BInputWithValidation",{staticClass:"column",attrs:{rules:"required|matricula","label-position":"on-border",type:"text",placeholder:"Matrícula",label:"Matrícula",message:"Tu matrícula institucional"},model:{value:e.defaultForm.enrollment,callback:function(t){e.$set(e.defaultForm,"enrollment",t)},expression:"defaultForm.enrollment"}}),a("BInputWithValidation",{staticClass:"column",attrs:{label:"Ingreso",rules:"required|min_value:1|max_value:12",name:"'Ingreso'",placeholder:"Selecciona tu ingreso","label-position":"on-border",type:"number",min:"1",max:"12",message:"El semestre que cursas actualmente"},model:{value:e.defaultForm.admission,callback:function(t){e.$set(e.defaultForm,"admission",t)},expression:"defaultForm.admission"}})],1),a("div",{staticClass:"columns"},[a("BSelectWithValidation",{staticClass:"column",attrs:{rules:"required","label-position":"on-border",placeholder:"Selecciona tu carrera",label:"Carrera",message:"La carrera que cursas actualmente"},model:{value:e.defaultForm.career,callback:function(t){e.$set(e.defaultForm,"career",t)},expression:"defaultForm.career"}},e._l(e.careers,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0),e.defaultForm.admission>7?a("BInputWithValidation",{staticClass:"column",attrs:{rules:"required","label-position":"on-border",type:"text",placeholder:"Especialidad",label:"Especialidad",message:"La especialidad que cursas actualmente"},model:{value:e.defaultForm.specialty,callback:function(t){e.$set(e.defaultForm,"specialty",t)},expression:"defaultForm.specialty"}}):e._e()],1),a("hr"),a("b-field",{attrs:{addons:!1}},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":e.isLoading},on:{click:function(t){return t.preventDefault(),s(e.submit)}}},[e._v(" Guardar ")])])])]}}])})],1)},i=[],l=a("2646"),r={name:"StudentUpdateForm",props:{student:{type:Object,default:null}},data(){return{isFileUploaded:!1,isLoading:!1,careers:l["a"],files:{CURP_file:null,NSS_file:null},defaultForm:{enrollment:"",career:"",admission:0,specialty:"",uuid:""}}},mounted(){this.$store.commit("students/BASIC",{key:"studentForm",value:this.student||this.defaultForm}),this.setStudentForm()},watch:{student(e){this.setStudentForm()}},methods:{async submit(){this.isLoading=!0;try{this.student.specialty&&this.defaultForm.admission<8&&(this.defaultForm.specialty=null),this.defaultForm.CURP&&(this.defaultForm.CURP=this.defaultForm.CURP.toUpperCase()),this.defaultForm.enrollment=this.defaultForm.enrollment.toUpperCase();var e=this.defaultForm,t=this.files;await this.$store.dispatch("students/update",{studentForm:e,files:t}),this.$buefy.snackbar.open({message:"Cambios guardados",queue:!1})}catch(a){console.log(a)}finally{this.isLoading=!1,this.files.NSS_file=null,this.files.CURP_file=null}},setStudentForm(){this.defaultForm.enrollment=this.student.enrollment,this.defaultForm.career=this.student.career,this.defaultForm.admission=this.student.admission,this.defaultForm.specialty=this.student.specialty,this.defaultForm.CURP=this.student.CURP,this.defaultForm.NSS=this.student.NSS,this.defaultForm.uuid=this.student.uuid}}},o=r,n=a("2877"),d=Object(n["a"])(o,s,i,!1,null,null,null);t["a"]=d.exports},"4daf":function(e,t,a){"use strict";var s=a("89d8"),i=a.n(s);i.a},"89d8":function(e,t,a){},cca2:function(e,t,a){"use strict";var s=a("fdb2"),i=a.n(s);i.a},fdb2:function(e,t,a){}}]);