(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2abe720d"],{"02fe":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"container"},[a("b-modal",{attrs:{width:640,scroll:"keep"},model:{value:t.isCardModalActive,callback:function(e){t.isCardModalActive=e},expression:"isCardModalActive"}},[a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.label))]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){return t.toggleModal()}}})]),a("section",{staticClass:"modal-card-body"},["PDF"==t.ext?a("embed",{attrs:{type:"application/pdf",src:t.url,width:"100%",height:"700"}}):a("b-image",{attrs:{src:t.url,alt:"A random image"}})],1),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button is-primary",on:{click:function(e){return t.toggleModal()}}},[t._v(" Cerrar ")])])])])],1)])},i=[],l={name:"DocumentPreview",props:{url:{type:String,default:""},label:{type:String,default:"Visualizaci√≥n de archivo"}},data(){return{isCardModalActive:!1,ext:""}},methods:{toggleModal(){this.getExt(this.url),this.isCardModalActive=!this.isCardModalActive},toggleModalRefresh(t){this.getExt(t),this.isCardModalActive=!this.isCardModalActive},getExt(t){const e=t.split(".").pop(),a=e.split("?")[0];this.ext=a}}},o=l,r=a("2877"),n=Object(r["a"])(o,s,i,!1,null,null,null);e["a"]=n.exports},"52ee":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ValidationObserver",{ref:"form3"},[a("request-document-preview",{ref:"RequestModalPreview",attrs:{url:t.url,label:t.label}}),t._l(t.documents,(function(e,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFile(e.name),expression:"showFile(doc.name)"}],key:s,staticClass:"mb-3"},[a("BUploadWithValidation",{staticClass:"file is-primary",attrs:{rules:"size:4000"+("PDF"===e.type?"|pdf":"|img")+(t.validateChange(e.name)?"":"|required"),label:e.name,message:"Selecciona tu "+e.name+" ("+e.type+")",isChanging:t.validateChange(e.name)},on:{viewFile:function(a){return t.viewFile(e.name)},input:function(a){t.uploadsList.tags[s]=e.name}},model:{value:t.uploadsList.files[s],callback:function(e){t.$set(t.uploadsList.files,s,e)},expression:"uploadsList.files[i]"}})],1)}))],2)},i=[],l=a("02fe"),o={name:"UploadsModalForm",components:{RequestDocumentPreview:l["a"]},props:{option:{type:String},schoolRequest:{type:Object,default:null},uploadsList:{type:Object,default:null}},data(){return{uploads:[],documents:[],url:"",label:""}},mounted(){this.getFiles()},methods:{viewFile(t){for(const e in this.uploads){const a=this.uploads[e];if(a.document==t){this.url=a.file,this.label=a.document,this.$refs.RequestModalPreview.toggleModalRefresh(this.url);break}}},showFile(t){return"INE Frente"==t||"INE Posterior"==t||("CONSTANCIA"==this.schoolRequest.type?"Foto personal"==t:"IMSS"==this.schoolRequest.type&&("CURP"==t||"Vigencia de Seguro Social"==t))},uploadFile(t,e){let a={file:t,tag:e},s=!1;for(const o in this.uploads)this.uploads[o].document===e&&(a=this.uploads[o],a.file=t,a.tag=e,s=!0);const i=new FormData;for(var l in a)i.append(l,a[l]);this.$store.dispatch("uploads/upload",{form_data:i,uuid:s})},async getFiles(){const t=await this.$store.dispatch("uploads/getList"),e=await this.$store.dispatch("uploads/getDocuments");this.uploads=t,this.documents=e},validateChange(t){for(const e in this.uploads)if(this.uploads[e].document==t)return!0;return!1}}},r=o,n=a("2877"),d=Object(n["a"])(r,s,i,!1,null,null,null);e["default"]=d.exports}}]);